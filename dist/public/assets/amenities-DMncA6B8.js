import{r as a,j as e,C as v,a as f,B as t,s as o,I as h,D as je,E as ue,G as ge,J as ve,K as fe,M as ye,N as Ne,O as Se}from"./index-CuDmVYun.js";import{S as ke,a as Ce,b as we,c as Pe,d as be}from"./select-7c0Tajxe.js";import{T as Te,a as Ie,b as A,c as E}from"./tabs-CX8s-N0D.js";import{D as O,f as R,a as B,b as $,c as z}from"./dialog-CYNkLpdV.js";import{T as J,a as L,b as p,c as l,d as M,e as i}from"./table-DYfKu6CY.js";import{B as We}from"./badge-DMaRL5Qw.js";import{t as n}from"./index-hq1wgpuD.js";import{D as Z,r as De,W as Fe,s as He,a as U,t as G,k as V}from"./dashboard-layout-RBv1DXX2.js";import"./index-D12ZMnos.js";import"./index-dzpsPapz.js";import"./users-DXv82DeH.js";import"./circle-alert-CPwmOhkC.js";const Ae=["Spa","Jacuzzi","Massage","Fitness Center","Sauna","Beauty Salon","Laundry","Car Rental","Tour Guide","Airport Transfer","Conference Room","Business Center","Other"];function qe(){const[T,_]=a.useState([]),[I,ee]=a.useState([]),[W,se]=a.useState([]),[ie,q]=a.useState(!0),[ae,le]=a.useState("halls"),[ne,D]=a.useState(!1),[re,F]=a.useState(!1),[ce,H]=a.useState(!1),[y,K]=a.useState(null),[N,Q]=a.useState(null),[S,X]=a.useState(null),[d,k]=a.useState(null),[r,m]=a.useState({name:"",capacity:"",priceInhouse:"",priceWalkin:""}),[x,C]=a.useState({name:"",priceInhouse:"",priceWalkin:""}),[c,j]=a.useState({kind:"",name:"",priceInhouse:"",priceWalkin:""}),w=async()=>{try{q(!0);const[s,P,Y]=await Promise.all([fetch("/api/halls"),fetch("/api/pools"),fetch("/api/services")]);if(s.ok){const b=await s.json();_(b)}if(P.ok){const b=await P.json();ee(b)}if(Y.ok){const b=await Y.json();se(b)}}catch{n.error("Failed to fetch amenities")}finally{q(!1)}};a.useEffect(()=>{w()},[]);const u=()=>{m({name:"",capacity:"",priceInhouse:"",priceWalkin:""}),C({name:"",priceInhouse:"",priceWalkin:""}),j({kind:"",name:"",priceInhouse:"",priceWalkin:""}),K(null),Q(null),X(null)},te=async()=>{try{const s={name:r.name,capacity:parseInt(r.capacity),priceInhouse:r.priceInhouse,priceWalkin:r.priceWalkin};(y?await fetch(`/api/halls/${y.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):await fetch("/api/halls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(n.success(y?"Hall updated successfully":"Hall created successfully"),D(!1),u(),w()):n.error("Failed to save hall")}catch{n.error("Failed to save hall")}},oe=async()=>{try{const s={name:x.name,priceInhouse:x.priceInhouse,priceWalkin:x.priceWalkin};(N?await fetch(`/api/pools/${N.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):await fetch("/api/pools",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(n.success(N?"Pool updated successfully":"Pool created successfully"),F(!1),u(),w()):n.error("Failed to save pool")}catch{n.error("Failed to save pool")}},de=async()=>{try{const s={kind:c.kind,name:c.name,priceInhouse:c.priceInhouse,priceWalkin:c.priceWalkin};(S?await fetch(`/api/services/${S.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):await fetch("/api/services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(n.success(S?"Service updated successfully":"Service created successfully"),H(!1),u(),w()):n.error("Failed to save service")}catch{n.error("Failed to save service")}},he=async()=>{if(d)try{(await fetch(`/api/${d.type}s/${d.id}`,{method:"DELETE"})).ok?(n.success(`${d.type} deleted successfully`),k(null),w()):n.error(`Failed to delete ${d.type}`)}catch{n.error(`Failed to delete ${d.type}`)}},xe=s=>{m({name:s.name,capacity:s.capacity.toString(),priceInhouse:s.priceInhouse,priceWalkin:s.priceWalkin}),K(s),D(!0)},pe=s=>{C({name:s.name,priceInhouse:s.priceInhouse,priceWalkin:s.priceWalkin}),Q(s),F(!0)},me=s=>{j({kind:s.kind,name:s.name,priceInhouse:s.priceInhouse,priceWalkin:s.priceWalkin}),X(s),H(!0)},g=s=>`NPR ${parseFloat(s).toLocaleString()}`;return ie?e.jsx(Z,{title:"Amenities Management",children:e.jsx("div",{className:"text-center",children:"Loading amenities..."})}):e.jsx(Z,{title:"Amenities Management",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Amenities Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage hotel amenities including halls, pools, and services with dual pricing for in-house guests and walk-in customers."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(v,{children:e.jsx(f,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(De,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:T.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Halls"})]})]})})}),e.jsx(v,{children:e.jsx(f,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-8 w-8 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:I.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pools"})]})]})})}),e.jsx(v,{children:e.jsx(f,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:W.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Services"})]})]})})})]}),e.jsxs(Te,{value:ae,onValueChange:le,children:[e.jsxs(Ie,{children:[e.jsx(A,{value:"halls",children:"Event Halls"}),e.jsx(A,{value:"pools",children:"Pools"}),e.jsx(A,{value:"services",children:"Services"})]}),e.jsxs(E,{value:"halls",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Event Halls"}),e.jsxs(O,{open:ne,onOpenChange:s=>{D(s),s||u()},children:[e.jsx(R,{asChild:!0,children:e.jsxs(t,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Add Hall"]})}),e.jsxs(B,{children:[e.jsx($,{children:e.jsx(z,{children:y?"Edit Hall":"Add New Hall"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"hall-name",children:"Hall Name"}),e.jsx(h,{id:"hall-name",value:r.name,onChange:s=>m({...r,name:s.target.value}),placeholder:"e.g., Grand Ballroom"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"hall-capacity",children:"Capacity"}),e.jsx(h,{id:"hall-capacity",type:"number",value:r.capacity,onChange:s=>m({...r,capacity:s.target.value}),placeholder:"e.g., 200"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"hall-price-inhouse",children:"In-House Price (NPR)"}),e.jsx(h,{id:"hall-price-inhouse",type:"number",step:"0.01",value:r.priceInhouse,onChange:s=>m({...r,priceInhouse:s.target.value}),placeholder:"5000.00"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"hall-price-walkin",children:"Walk-in Price (NPR)"}),e.jsx(h,{id:"hall-price-walkin",type:"number",step:"0.01",value:r.priceWalkin,onChange:s=>m({...r,priceWalkin:s.target.value}),placeholder:"8000.00"})]})]}),e.jsx(t,{onClick:te,className:"w-full",children:y?"Update Hall":"Create Hall"})]})]})]})]}),e.jsx(v,{children:e.jsx(f,{className:"p-0",children:e.jsxs(J,{children:[e.jsx(L,{children:e.jsxs(p,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Capacity"}),e.jsx(l,{children:"In-House Price"}),e.jsx(l,{children:"Walk-in Price"}),e.jsx(l,{children:"Actions"})]})}),e.jsxs(M,{children:[T.map(s=>e.jsxs(p,{children:[e.jsx(i,{className:"font-medium",children:s.name}),e.jsxs(i,{children:[s.capacity," people"]}),e.jsx(i,{children:g(s.priceInhouse)}),e.jsx(i,{children:g(s.priceWalkin)}),e.jsx(i,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(t,{size:"sm",variant:"outline",onClick:()=>xe(s),children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(t,{size:"sm",variant:"outline",onClick:()=>k({type:"hall",id:s.id}),children:e.jsx(V,{className:"h-4 w-4"})})]})})]},s.id)),T.length===0&&e.jsx(p,{children:e.jsx(i,{colSpan:5,className:"text-center text-muted-foreground",children:"No halls configured. Add your first hall to get started."})})]})]})})})]}),e.jsxs(E,{value:"pools",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Swimming Pools"}),e.jsxs(O,{open:re,onOpenChange:s=>{F(s),s||u()},children:[e.jsx(R,{asChild:!0,children:e.jsxs(t,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Add Pool"]})}),e.jsxs(B,{children:[e.jsx($,{children:e.jsx(z,{children:N?"Edit Pool":"Add New Pool"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"pool-name",children:"Pool Name"}),e.jsx(h,{id:"pool-name",value:x.name,onChange:s=>C({...x,name:s.target.value}),placeholder:"e.g., Olympic Pool"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"pool-price-inhouse",children:"In-House Price (NPR)"}),e.jsx(h,{id:"pool-price-inhouse",type:"number",step:"0.01",value:x.priceInhouse,onChange:s=>C({...x,priceInhouse:s.target.value}),placeholder:"500.00"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"pool-price-walkin",children:"Walk-in Price (NPR)"}),e.jsx(h,{id:"pool-price-walkin",type:"number",step:"0.01",value:x.priceWalkin,onChange:s=>C({...x,priceWalkin:s.target.value}),placeholder:"800.00"})]})]}),e.jsx(t,{onClick:oe,className:"w-full",children:N?"Update Pool":"Create Pool"})]})]})]})]}),e.jsx(v,{children:e.jsx(f,{className:"p-0",children:e.jsxs(J,{children:[e.jsx(L,{children:e.jsxs(p,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"In-House Price"}),e.jsx(l,{children:"Walk-in Price"}),e.jsx(l,{children:"Actions"})]})}),e.jsxs(M,{children:[I.map(s=>e.jsxs(p,{children:[e.jsx(i,{className:"font-medium",children:s.name}),e.jsx(i,{children:g(s.priceInhouse)}),e.jsx(i,{children:g(s.priceWalkin)}),e.jsx(i,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(t,{size:"sm",variant:"outline",onClick:()=>pe(s),children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(t,{size:"sm",variant:"outline",onClick:()=>k({type:"pool",id:s.id}),children:e.jsx(V,{className:"h-4 w-4"})})]})})]},s.id)),I.length===0&&e.jsx(p,{children:e.jsx(i,{colSpan:4,className:"text-center text-muted-foreground",children:"No pools configured. Add your first pool to get started."})})]})]})})})]}),e.jsxs(E,{value:"services",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Hotel Services"}),e.jsxs(O,{open:ce,onOpenChange:s=>{H(s),s||u()},children:[e.jsx(R,{asChild:!0,children:e.jsxs(t,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Add Service"]})}),e.jsxs(B,{children:[e.jsx($,{children:e.jsx(z,{children:S?"Edit Service":"Add New Service"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"service-kind",children:"Service Type"}),e.jsxs(ke,{value:c.kind,onValueChange:s=>j({...c,kind:s}),children:[e.jsx(Ce,{children:e.jsx(we,{placeholder:"Select service type"})}),e.jsx(Pe,{children:Ae.map(s=>e.jsx(be,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"service-name",children:"Service Name"}),e.jsx(h,{id:"service-name",value:c.name,onChange:s=>j({...c,name:s.target.value}),placeholder:"e.g., Swedish Massage"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"service-price-inhouse",children:"In-House Price (NPR)"}),e.jsx(h,{id:"service-price-inhouse",type:"number",step:"0.01",value:c.priceInhouse,onChange:s=>j({...c,priceInhouse:s.target.value}),placeholder:"1500.00"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"service-price-walkin",children:"Walk-in Price (NPR)"}),e.jsx(h,{id:"service-price-walkin",type:"number",step:"0.01",value:c.priceWalkin,onChange:s=>j({...c,priceWalkin:s.target.value}),placeholder:"2000.00"})]})]}),e.jsx(t,{onClick:de,className:"w-full",children:S?"Update Service":"Create Service"})]})]})]})]}),e.jsx(v,{children:e.jsx(f,{className:"p-0",children:e.jsxs(J,{children:[e.jsx(L,{children:e.jsxs(p,{children:[e.jsx(l,{children:"Service Type"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"In-House Price"}),e.jsx(l,{children:"Walk-in Price"}),e.jsx(l,{children:"Actions"})]})}),e.jsxs(M,{children:[W.map(s=>e.jsxs(p,{children:[e.jsx(i,{children:e.jsx(We,{variant:"secondary",children:s.kind})}),e.jsx(i,{className:"font-medium",children:s.name}),e.jsx(i,{children:g(s.priceInhouse)}),e.jsx(i,{children:g(s.priceWalkin)}),e.jsx(i,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(t,{size:"sm",variant:"outline",onClick:()=>me(s),children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(t,{size:"sm",variant:"outline",onClick:()=>k({type:"service",id:s.id}),children:e.jsx(V,{className:"h-4 w-4"})})]})})]},s.id)),W.length===0&&e.jsx(p,{children:e.jsx(i,{colSpan:5,className:"text-center text-muted-foreground",children:"No services configured. Add your first service to get started."})})]})]})})})]})]}),e.jsx(je,{open:!!d,onOpenChange:()=>k(null),children:e.jsxs(ue,{children:[e.jsxs(ge,{children:[e.jsx(ve,{children:"Are you sure?"}),e.jsxs(fe,{children:["This action cannot be undone. This will permanently delete this ",d==null?void 0:d.type,"."]})]}),e.jsxs(ye,{children:[e.jsx(Ne,{children:"Cancel"}),e.jsx(Se,{onClick:he,children:"Delete"})]})]})})]})})}export{qe as default};
