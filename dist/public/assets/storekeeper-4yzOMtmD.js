import{o as b,l as a,j as e,C as n,a as o}from"./index-CuDmVYun.js";import{T as d,J as h,I as p,D as v}from"./dashboard-layout-RBv1DXX2.js";import{B as j}from"./badge-DMaRL5Qw.js";import{u as c}from"./use-realtime-query-CGmARpos.js";import{P as g,S as k}from"./users-DXv82DeH.js";import"./circle-alert-CPwmOhkC.js";import"./use-websocket-CCUHb1Px.js";function S(){const[,x]=b(),{data:i=[]}=a({queryKey:["/api/hotels/current/inventory-items"],refetchInterval:3e3}),{data:s=[]}=a({queryKey:["/api/hotels/current/low-stock-items"],refetchInterval:3e3}),{data:m=[]}=a({queryKey:["/api/tasks/my-tasks"],refetchInterval:3e3}),{data:r=[]}=a({queryKey:["/api/hotels/current/stock-requests/pending"],refetchInterval:3e3});c({queryKey:["/api/hotels/current/stock-requests/pending"],refetchInterval:3e3,events:["stock-request:created","stock-request:updated"]}),c({queryKey:["/api/hotels/current/inventory-items"],refetchInterval:3e3,events:["stock:updated"]}),c({queryKey:["/api/tasks/my-tasks"],refetchInterval:3e3,events:["task:created","task:updated","task:deleted"]});const l=m.filter(t=>t.status==="pending"),u=[{title:"рд╕рд╛рдорд╛рди рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН / View Stock",subtitle:`${i.length} items in store`,icon:e.jsx(g,{className:"h-12 w-12"}),color:"bg-blue-50 hover:bg-blue-100",iconColor:"text-blue-600",route:"/storekeeper/inventory-tracking",badge:null,testId:"button-view-stock"},{title:"рдХрдо рд╕рд╛рдорд╛рди / Low Stock",subtitle:s.length>0?`${s.length} items need reorder`:"All items are in stock",icon:e.jsx(d,{className:"h-12 w-12"}),color:s.length>0?"bg-red-50 hover:bg-red-100":"bg-gray-50 hover:bg-gray-100",iconColor:s.length>0?"text-red-600":"text-gray-400",route:"/storekeeper/inventory-tracking",badge:s.length>0?s.length:null,testId:"button-low-stock"},{title:"рд╕рд╛рдорд╛рди рджрд┐рдиреБ/рд▓рд┐рдиреБ / Give/Receive Stock",subtitle:"Manage inventory in/out",icon:e.jsx(k,{className:"h-12 w-12"}),color:"bg-green-50 hover:bg-green-100",iconColor:"text-green-600",route:"/storekeeper/inventory-management",badge:null,testId:"button-manage-stock"},{title:"рдорд╛рдЧ рдЖрдПрдХреЛ / Stock Requests",subtitle:r.length>0?`${r.length} pending requests`:"No pending requests",icon:e.jsx(h,{className:"h-12 w-12"}),color:r.length>0?"bg-orange-50 hover:bg-orange-100":"bg-gray-50 hover:bg-gray-100",iconColor:r.length>0?"text-orange-600":"text-gray-400",route:"/storekeeper/stock-requests",badge:r.length>0?r.length:null,testId:"button-stock-requests"},{title:"рдореЗрд░реЛ рдХрд╛рдо / My Tasks",subtitle:l.length>0?`${l.length} tasks pending`:"No pending tasks",icon:e.jsx(p,{className:"h-12 w-12"}),color:l.length>0?"bg-purple-50 hover:bg-purple-100":"bg-gray-50 hover:bg-gray-100",iconColor:l.length>0?"text-purple-600":"text-gray-400",route:"/storekeeper/my-tasks",badge:l.length>0?l.length:null,testId:"button-my-tasks"}];return e.jsx(v,{title:"рд╕реНрдЯреЛрд░ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ / Storekeeper",children:e.jsxs("div",{className:"space-y-6 p-2 sm:p-6",children:[e.jsx(n,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsxs(o,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Store Status"}),e.jsx("p",{className:"text-blue-100",children:"Everything at a glance"})]}),e.jsx(g,{className:"h-16 w-16 opacity-50"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-3xl font-bold",children:i.length}),e.jsx("div",{className:"text-sm text-blue-100",children:"Total Items"})]}),e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-3xl font-bold",children:s.length}),e.jsx("div",{className:"text-sm text-blue-100",children:"Low Stock"})]}),e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-3xl font-bold",children:r.length}),e.jsx("div",{className:"text-sm text-blue-100",children:"Requests"})]}),e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-3xl font-bold",children:l.length}),e.jsx("div",{className:"text-sm text-blue-100",children:"Tasks"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:u.map(t=>e.jsx(n,{className:`${t.color} border-2 cursor-pointer transition-all hover:scale-105 hover:shadow-lg relative`,onClick:()=>x(t.route),"data-testid":t.testId,children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:`${t.iconColor} flex-shrink-0`,children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:t.title}),e.jsx("p",{className:"text-gray-600 text-base",children:t.subtitle})]})]}),t.badge!==null&&e.jsx(j,{className:"absolute top-4 right-4 h-10 w-10 flex items-center justify-center rounded-full bg-red-500 text-white text-lg font-bold",children:t.badge})]})})},t.route))}),s.length>0&&e.jsx(n,{className:"border-red-200 bg-red-50",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{className:"h-8 w-8 text-red-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-red-900 text-lg",children:"тЪая╕П Attention! / рдзреНрдпрд╛рди рджрд┐рдиреБрд╣реЛрд╕реН!"}),e.jsxs("p",{className:"text-red-700 text-base",children:[s.length," items are running low. Please check and reorder."]}),e.jsxs("p",{className:"text-red-600 text-sm mt-1",children:[s.length," рд╕рд╛рдорд╛рди рд╕рдХрд┐рдБрджреИ рдЫред рдХреГрдкрдпрд╛ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реНред"]})]})]})})}),r.length>0&&e.jsx(n,{className:"border-orange-200 bg-orange-50",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(h,{className:"h-8 w-8 text-orange-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-orange-900 text-lg",children:"ЁЯУЛ New Requests / рдирдпрд╛рдБ рдорд╛рдЧ"}),e.jsxs("p",{className:"text-orange-700 text-base",children:[r.length,' staff members are waiting for stock. Click "Stock Requests" above.']})]})]})})})]})})}export{S as default};
