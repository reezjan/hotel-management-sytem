import{l as i,j as e,C as a,m as o,n as x,a as c,Q as m,x as n}from"./index-CuDmVYun.js";import{D as f,i as g,X as p}from"./dashboard-layout-RBv1DXX2.js";import{B as u}from"./badge-DMaRL5Qw.js";import{C as N}from"./users-DXv82DeH.js";import"./circle-alert-CPwmOhkC.js";function D(){const{data:t}=i({queryKey:["/api/attendance/status"],refetchInterval:3e3}),{data:h=[]}=i({queryKey:["/api/attendance/history"],refetchInterval:3e3}),d=(t==null?void 0:t.isOnDuty)||!1,r=t==null?void 0:t.attendance,l=h.slice(0,5);return e.jsx(f,{title:"Duty Status",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{children:[e.jsx(o,{children:e.jsx(x,{children:"My Duty Status"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(g,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Current Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your duty status for today"})]})]}),e.jsx(u,{className:d?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",variant:"secondary","data-testid":"duty-status-badge",children:d?"On Duty":"Off Duty"})]}),r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(m,{className:"h-6 w-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clock In Time"}),e.jsx("p",{className:"font-medium text-foreground","data-testid":"clock-in-time",children:n(r.clockInTime)})]})]})})}),e.jsx(a,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(N,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Location"}),e.jsx("p",{className:"font-medium text-foreground","data-testid":"clock-in-location",children:r.clockInLocation||"N/A"})]})]})})})]}),e.jsx(a,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:e.jsx(c,{className:"p-4",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[e.jsx("strong",{children:"Note:"})," Use the duty toggle in the top navigation bar to clock in or clock out. Your attendance is automatically tracked when you're on duty."]})})})]})})]}),e.jsxs(a,{children:[e.jsx(o,{children:e.jsx(x,{children:"Recent Attendance History"})}),e.jsx(c,{children:l.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No attendance records found"}):e.jsx("div",{className:"space-y-3",children:l.map((s,j)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`attendance-record-${j}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"h-4 w-4 text-green-500"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:n(s.clockInTime)})]}),s.clockOutTime&&e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(p,{className:"h-4 w-4 text-gray-500"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n(s.clockOutTime)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(u,{variant:s.status==="active"?"default":"secondary",children:s.status==="active"?"Active":"Completed"}),s.totalHours&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[parseFloat(s.totalHours).toFixed(2)," hours"]})]})]},s.id))})})]})]})})}export{D as default};
