var sa=Object.defineProperty;var aa=(t,e,r)=>e in t?sa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var s=(t,e,r)=>aa(t,typeof e!="symbol"?e+"":e,r);import{z as o}from"./index-CuDmVYun.js";const d=Symbol.for("drizzle:entityKind");function C(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,d))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(d in r&&r[d]===e[d])return!0;r=Object.getPrototypeOf(r)}return!1}var he;he=d;class E{constructor(e,r){s(this,"name");s(this,"keyAsName");s(this,"primary");s(this,"notNull");s(this,"default");s(this,"defaultFn");s(this,"onUpdateFn");s(this,"hasDefault");s(this,"isUnique");s(this,"uniqueName");s(this,"uniqueType");s(this,"dataType");s(this,"columnType");s(this,"enumValues");s(this,"generated");s(this,"generatedIdentity");s(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}s(E,he,"Column");var _e;_e=d;class ri{constructor(e,r,n){s(this,"config");s(this,"$default",this.$defaultFn);s(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}s(ri,_e,"ColumnBuilder");const K=Symbol.for("drizzle:Name");var ye;ye=d;class ni{constructor(e,r){s(this,"reference");s(this,"_onUpdate","no action");s(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:l,foreignColumns:c}=e();return{name:n,columns:l,foreignTable:c[0].table,foreignColumns:c}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new ii(e,this)}}s(ni,ye,"PgForeignKeyBuilder");var be;be=d;class ii{constructor(e,r){s(this,"reference");s(this,"onUpdate");s(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),l=r.map(S=>S.name),c=n.map(S=>S.name),_=[this.table[K],...l,n[0].table[K],...c];return e??`${_.join("_")}_fk`}}s(ii,be,"PgForeignKey");function oa(t,...e){return t(...e)}function ie(t){return new oi(t)}function si(t,e){return`${t[K]}_${e.join("_")}_unique`}var we;we=d;class ai{constructor(e,r){s(this,"columns");s(this,"nullsNotDistinctConfig",!1);this.name=r,this.columns=e}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new ui(e,this.columns,this.nullsNotDistinctConfig,this.name)}}s(ai,we,"PgUniqueConstraintBuilder");var Ne;Ne=d;class oi{constructor(e){s(this,"name");this.name=e}on(...e){return new ai(e,this.name)}}s(oi,Ne,"PgUniqueOnConstraintBuilder");var Te;Te=d;class ui{constructor(e,r,n,l){s(this,"columns");s(this,"name");s(this,"nullsNotDistinct",!1);this.table=e,this.columns=r,this.name=l??si(this.table,this.columns.map(c=>c.name)),this.nullsNotDistinct=n}getName(){return this.name}}s(ui,Te,"PgUniqueConstraint");function de(t,e,r){for(let n=e;n<t.length;n++){const l=t[n];if(l==="\\"){n++;continue}if(l==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(l===","||l==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function di(t,e=0){const r=[];let n=e,l=!1;for(;n<t.length;){const c=t[n];if(c===","){(l||n===e)&&r.push(""),l=!0,n++;continue}if(l=!1,c==="\\"){n+=2;continue}if(c==='"'){const[T,A]=de(t,n+1,!0);r.push(T),n=A;continue}if(c==="}")return[r,n+1];if(c==="{"){const[T,A]=di(t,n+1);r.push(T),n=A;continue}const[_,S]=de(t,n,!1);r.push(_),n=S}return[r,n]}function ua(t){const[e]=di(t,1);return e}function li(t){return`{${t.map(e=>Array.isArray(e)?li(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Se,Ie;class N extends(Ie=ri,Se=d,Ie){constructor(){super(...arguments);s(this,"foreignKeyConfigs",[])}array(r){return new mi(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:l,actions:c})=>oa((_,S)=>{const T=new ni(()=>{const A=_();return{columns:[r],foreignColumns:[A]}});return S.onUpdate&&T.onUpdate(S.onUpdate),S.onDelete&&T.onDelete(S.onDelete),T.build(n)},l,c))}buildExtraConfigColumn(r){return new ci(r,this.config)}}s(N,Se,"PgColumnBuilder");var Ae,ve;class b extends(ve=E,Ae=d,ve){constructor(e,r){r.uniqueName||(r.uniqueName=si(e,[r.name])),super(e,r),this.table=e}}s(b,Ae,"PgColumn");var Pe,ze;class ci extends(ze=b,Pe=d,ze){constructor(){super(...arguments);s(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});s(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}s(ci,Pe,"ExtraConfigColumn");var De,xe;class mi extends(xe=N,De=d,xe){constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new re(e,this.config,r)}}s(mi,De,"PgArrayBuilder");var Be,Ce;const J=class J extends(Ce=b,Be=d,Ce){constructor(r,n,l,c){super(r,n);s(this,"size");this.baseColumn=l,this.range=c,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=ua(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const l=r.map(c=>c===null?null:C(this.baseColumn,J)?this.baseColumn.mapToDriverValue(c,!0):this.baseColumn.mapToDriverValue(c));return n?l:li(l)}};s(J,Be,"PgArray");let re=J;const le=Symbol.for("drizzle:isPgEnum");function da(t){return!!t&&typeof t=="function"&&le in t&&t[le]===!0}var qe;qe=d;class se{constructor(e,r,n,l=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:l}}}s(se,qe,"Subquery");const la={startActiveSpan(t,e){return e()}},U=Symbol.for("drizzle:ViewBaseConfig"),Z=Symbol.for("drizzle:Schema"),ce=Symbol.for("drizzle:Columns"),me=Symbol.for("drizzle:ExtraConfigColumns"),ee=Symbol.for("drizzle:OriginalName"),te=Symbol.for("drizzle:BaseName"),R=Symbol.for("drizzle:IsAlias"),pe=Symbol.for("drizzle:ExtraConfigBuilder"),pi=Symbol.for("drizzle:IsDrizzleTable");var Ve,Le,Fe,Me,Qe,Ke,Ue,Ee,Oe,$e;$e=d,Oe=K,Ee=ee,Ue=Z,Ke=ce,Qe=me,Me=te,Fe=R,Le=pi,Ve=pe;class V{constructor(e,r,n){s(this,Oe);s(this,Ee);s(this,Ue);s(this,Ke);s(this,Qe);s(this,Me);s(this,Fe,!1);s(this,Le,!0);s(this,Ve);this[K]=this[ee]=e,this[Z]=r,this[te]=n}}s(V,$e,"Table"),s(V,"Symbol",{Name:K,Schema:Z,OriginalName:ee,Columns:ce,ExtraConfigColumns:me,BaseName:te,IsAlias:R,ExtraConfigBuilder:pe});function fi(t){return typeof t=="object"&&t!==null&&pi in t}function ca(t){return t!=null&&typeof t.getSQL=="function"}function ma(t){var r;const e={sql:"",params:[]};for(const n of t)e.sql+=n.sql,e.params.push(...n.params),(r=n.typings)!=null&&r.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var je;je=d;class F{constructor(e){s(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new z([this])}}s(F,je,"StringChunk");var ke;ke=d;const Q=class Q{constructor(e){s(this,"decoder",gi);s(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return la.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r==null||r.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:l,escapeName:c,escapeParam:_,prepareTyping:S,inlineParams:T,paramStartIndex:A}=n;return ma(e.map(m=>{var M;if(C(m,F))return{sql:m.value.join(""),params:[]};if(C(m,G))return{sql:c(m.value),params:[]};if(m===void 0)return{sql:"",params:[]};if(Array.isArray(m)){const I=[new F("(")];for(const[D,ia]of m.entries())I.push(ia),D<m.length-1&&I.push(new F(", "));return I.push(new F(")")),this.buildQueryFromSourceParams(I,n)}if(C(m,Q))return this.buildQueryFromSourceParams(m.queryChunks,{...n,inlineParams:T||m.shouldInlineParams});if(C(m,V)){const I=m[V.Symbol.Schema],D=m[V.Symbol.Name];return{sql:I===void 0||m[R]?c(D):c(I)+"."+c(D),params:[]}}if(C(m,E)){const I=l.getColumnCasing(m);if(r.invokeSource==="indexes")return{sql:c(I),params:[]};const D=m.table[V.Symbol.Schema];return{sql:m.table[R]||D===void 0?c(m.table[V.Symbol.Name])+"."+c(I):c(D)+"."+c(m.table[V.Symbol.Name])+"."+c(I),params:[]}}if(C(m,yi)){const I=m[U].schema,D=m[U].name;return{sql:I===void 0||m[U].isAlias?c(D):c(I)+"."+c(D),params:[]}}if(C(m,ae)){if(C(m.value,X))return{sql:_(A.value++,m),params:[m],typings:["none"]};const I=m.value===null?null:m.encoder.mapToDriverValue(m.value);if(C(I,Q))return this.buildQueryFromSourceParams([I],n);if(T)return{sql:this.mapInlineParam(I,n),params:[]};let D=["none"];return S&&(D=[S(m.encoder)]),{sql:_(A.value++,I),params:[I],typings:D}}return C(m,X)?{sql:_(A.value++,m),params:[m],typings:["none"]}:C(m,Q.Aliased)&&m.fieldAlias!==void 0?{sql:c(m.fieldAlias),params:[]}:C(m,se)?m._.isWith?{sql:c(m._.alias),params:[]}:this.buildQueryFromSourceParams([new F("("),m._.sql,new F(") "),new G(m._.alias)],n):da(m)?m.schema?{sql:c(m.schema)+"."+c(m.enumName),params:[]}:{sql:c(m.enumName),params:[]}:ca(m)?(M=m.shouldOmitSQLParens)!=null&&M.call(m)?this.buildQueryFromSourceParams([m.getSQL()],n):this.buildQueryFromSourceParams([new F("("),m.getSQL(),new F(")")],n):T?{sql:this.mapInlineParam(m,n),params:[]}:{sql:_(A.value++,m),params:[m],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Q.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};s(Q,ke,"SQL");let z=Q;var Re;Re=d;class G{constructor(e){s(this,"brand");this.value=e}getSQL(){return new z([this])}}s(G,Re,"Name");const gi={mapFromDriverValue:t=>t},hi={mapToDriverValue:t=>t};({...gi,...hi});var Ge;Ge=d;class ae{constructor(e,r=hi){s(this,"brand");this.value=e,this.encoder=r}getSQL(){return new z([this])}}s(ae,Ge,"Param");function f(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new F(t[0]));for(const[n,l]of e.entries())r.push(l,new F(t[n+1]));return new z(r)}(t=>{function e(){return new z([])}t.empty=e;function r(T){return new z(T)}t.fromList=r;function n(T){return new z([new F(T)])}t.raw=n;function l(T,A){const m=[];for(const[M,I]of T.entries())M>0&&A!==void 0&&m.push(A),m.push(I);return new z(m)}t.join=l;function c(T){return new G(T)}t.identifier=c;function _(T){return new X(T)}t.placeholder=_;function S(T,A){return new ae(T,A)}t.param=S})(f||(f={}));(t=>{var r;r=d;const n=class n{constructor(c,_){s(this,"isSelectionField",!1);this.sql=c,this.fieldAlias=_}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};s(n,r,"SQL.Aliased");let e=n;t.Aliased=e})(z||(z={}));var Xe;Xe=d;class X{constructor(e){this.name=e}getSQL(){return new z([this])}}s(X,Xe,"Placeholder");const _i=Symbol.for("drizzle:IsDrizzleView");var Je,He,We;We=d,He=U,Je=_i;class yi{constructor({name:e,schema:r,selectedFields:n,query:l}){s(this,He);s(this,Je,!0);this[U]={name:e,originalName:e,schema:r,selectedFields:n,query:l,isExisting:!l,isAlias:!1}}getSQL(){return new z([this])}}s(yi,We,"View");function pa(t){return typeof t=="object"&&t!==null&&_i in t}E.prototype.getSQL=function(){return new z([this])};V.prototype.getSQL=function(){return new z([this])};se.prototype.getSQL=function(){return new z([this])};function fa(t){return t[V.Symbol.Columns]}function ga(t){return t[U].selectedFields}function B(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var Ye,Ze;class k extends(Ze=N,Ye=d,Ze){generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}s(k,Ye,"PgIntColumnBaseBuilder");var et,tt;class bi extends(tt=k,et=d,tt){constructor(e){super(e,"number","PgBigInt53")}build(e){return new wi(e,this.config)}}s(bi,et,"PgBigInt53Builder");var rt,nt;class wi extends(nt=b,rt=d,nt){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(wi,rt,"PgBigInt53");var it,st;class Ni extends(st=k,it=d,st){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Ti(e,this.config)}}s(Ni,it,"PgBigInt64Builder");var at,ot;class Ti extends(ot=b,at=d,ot){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}s(Ti,at,"PgBigInt64");function ha(t,e){const{name:r,config:n}=B(t,e);return n.mode==="number"?new bi(r):new Ni(r)}var ut,dt;class Si extends(dt=N,ut=d,dt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ii(e,this.config)}}s(Si,ut,"PgBigSerial53Builder");var lt,ct;class Ii extends(ct=b,lt=d,ct){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(Ii,lt,"PgBigSerial53");var mt,pt;class Ai extends(pt=N,mt=d,pt){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new vi(e,this.config)}}s(Ai,mt,"PgBigSerial64Builder");var ft,gt;class vi extends(gt=b,ft=d,gt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}s(vi,ft,"PgBigSerial64");function _a(t,e){const{name:r,config:n}=B(t,e);return n.mode==="number"?new Si(r):new Ai(r)}var ht,_t;class Pi extends(_t=N,ht=d,_t){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new zi(e,this.config)}}s(Pi,ht,"PgBooleanBuilder");var yt,bt;class zi extends(bt=b,yt=d,bt){getSQLType(){return"boolean"}}s(zi,yt,"PgBoolean");function q(t){return new Pi(t??"")}var wt,Nt;class Di extends(Nt=N,wt=d,Nt){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new xi(e,this.config)}}s(Di,wt,"PgCharBuilder");var Tt,St;class xi extends(St=b,Tt=d,St){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}s(xi,Tt,"PgChar");function ya(t,e={}){const{name:r,config:n}=B(t,e);return new Di(r,n)}var It,At;class Bi extends(At=N,It=d,At){constructor(e){super(e,"string","PgCidr")}build(e){return new Ci(e,this.config)}}s(Bi,It,"PgCidrBuilder");var vt,Pt;class Ci extends(Pt=b,vt=d,Pt){getSQLType(){return"cidr"}}s(Ci,vt,"PgCidr");function ba(t){return new Bi(t??"")}var zt,Dt;class qi extends(Dt=N,zt=d,Dt){constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new Vi(e,this.config)}}s(qi,zt,"PgCustomColumnBuilder");var xt,Bt;class Vi extends(Bt=b,xt=d,Bt){constructor(r,n){super(r,n);s(this,"sqlName");s(this,"mapTo");s(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}s(Vi,xt,"PgCustomColumn");function wa(t){return(e,r)=>{const{name:n,config:l}=B(e,r);return new qi(n,l,t)}}var Ct,qt;class O extends(qt=N,Ct=d,qt){defaultNow(){return this.default(f`now()`)}}s(O,Ct,"PgDateColumnBaseBuilder");var Vt,Lt;class Li extends(Lt=O,Vt=d,Lt){constructor(e){super(e,"date","PgDate")}build(e){return new Fi(e,this.config)}}s(Li,Vt,"PgDateBuilder");var Ft,Mt;class Fi extends(Mt=b,Ft=d,Mt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}s(Fi,Ft,"PgDate");var Qt,Kt;class Mi extends(Kt=O,Qt=d,Kt){constructor(e){super(e,"string","PgDateString")}build(e){return new Qi(e,this.config)}}s(Mi,Qt,"PgDateStringBuilder");var Ut,Et;class Qi extends(Et=b,Ut=d,Et){getSQLType(){return"date"}}s(Qi,Ut,"PgDateString");function Na(t,e){const{name:r,config:n}=B(t,e);return(n==null?void 0:n.mode)==="date"?new Li(r):new Mi(r)}var Ot,$t;class Ki extends($t=N,Ot=d,$t){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Ui(e,this.config)}}s(Ki,Ot,"PgDoublePrecisionBuilder");var jt,kt;class Ui extends(kt=b,jt=d,kt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}s(Ui,jt,"PgDoublePrecision");function Ta(t){return new Ki(t??"")}var Rt,Gt;class Ei extends(Gt=N,Rt=d,Gt){constructor(e){super(e,"string","PgInet")}build(e){return new Oi(e,this.config)}}s(Ei,Rt,"PgInetBuilder");var Xt,Jt;class Oi extends(Jt=b,Xt=d,Jt){getSQLType(){return"inet"}}s(Oi,Xt,"PgInet");function Sa(t){return new Ei(t??"")}var Ht,Wt;class $i extends(Wt=k,Ht=d,Wt){constructor(e){super(e,"number","PgInteger")}build(e){return new ji(e,this.config)}}s($i,Ht,"PgIntegerBuilder");var Yt,Zt;class ji extends(Zt=b,Yt=d,Zt){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}s(ji,Yt,"PgInteger");function L(t){return new $i(t??"")}var er,tr;class ki extends(tr=N,er=d,tr){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new Ri(e,this.config)}}s(ki,er,"PgIntervalBuilder");var rr,nr;class Ri extends(nr=b,rr=d,nr){constructor(){super(...arguments);s(this,"fields",this.config.intervalConfig.fields);s(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}s(Ri,rr,"PgInterval");function Ia(t,e={}){const{name:r,config:n}=B(t,e);return new ki(r,n)}var ir,sr;class Gi extends(sr=N,ir=d,sr){constructor(e){super(e,"json","PgJson")}build(e){return new Xi(e,this.config)}}s(Gi,ir,"PgJsonBuilder");var ar,or;class Xi extends(or=b,ar=d,or){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Xi,ar,"PgJson");function Aa(t){return new Gi(t??"")}var ur,dr;class Ji extends(dr=N,ur=d,dr){constructor(e){super(e,"json","PgJsonb")}build(e){return new Hi(e,this.config)}}s(Ji,ur,"PgJsonbBuilder");var lr,cr;class Hi extends(cr=b,lr=d,cr){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Hi,lr,"PgJsonb");function x(t){return new Ji(t??"")}var mr,pr;class Wi extends(pr=N,mr=d,pr){constructor(e){super(e,"array","PgLine")}build(e){return new Yi(e,this.config)}}s(Wi,mr,"PgLineBuilder");var fr,gr;class Yi extends(gr=b,fr=d,gr){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,l]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(l)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}s(Yi,fr,"PgLine");var hr,_r;class Zi extends(_r=N,hr=d,_r){constructor(e){super(e,"json","PgLineABC")}build(e){return new es(e,this.config)}}s(Zi,hr,"PgLineABCBuilder");var yr,br;class es extends(br=b,yr=d,br){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,l]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(l)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}s(es,yr,"PgLineABC");function va(t,e){const{name:r,config:n}=B(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new Wi(r):new Zi(r)}var wr,Nr;class ts extends(Nr=N,wr=d,Nr){constructor(e){super(e,"string","PgMacaddr")}build(e){return new rs(e,this.config)}}s(ts,wr,"PgMacaddrBuilder");var Tr,Sr;class rs extends(Sr=b,Tr=d,Sr){getSQLType(){return"macaddr"}}s(rs,Tr,"PgMacaddr");function Pa(t){return new ts(t??"")}var Ir,Ar;class ns extends(Ar=N,Ir=d,Ar){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new is(e,this.config)}}s(ns,Ir,"PgMacaddr8Builder");var vr,Pr;class is extends(Pr=b,vr=d,Pr){getSQLType(){return"macaddr8"}}s(is,vr,"PgMacaddr8");function za(t){return new ns(t??"")}var zr,Dr;class ss extends(Dr=N,zr=d,Dr){constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new as(e,this.config)}}s(ss,zr,"PgNumericBuilder");var xr,Br;class as extends(Br=b,xr=d,Br){constructor(r,n){super(r,n);s(this,"precision");s(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}s(as,xr,"PgNumeric");function p(t,e){const{name:r,config:n}=B(t,e);return new ss(r,n==null?void 0:n.precision,n==null?void 0:n.scale)}var Cr,qr;class os extends(qr=N,Cr=d,qr){constructor(e){super(e,"array","PgPointTuple")}build(e){return new us(e,this.config)}}s(os,Cr,"PgPointTupleBuilder");var Vr,Lr;class us extends(Lr=b,Vr=d,Lr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}s(us,Vr,"PgPointTuple");var Fr,Mr;class ds extends(Mr=N,Fr=d,Mr){constructor(e){super(e,"json","PgPointObject")}build(e){return new ls(e,this.config)}}s(ds,Fr,"PgPointObjectBuilder");var Qr,Kr;class ls extends(Kr=b,Qr=d,Kr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}s(ls,Qr,"PgPointObject");function Da(t,e){const{name:r,config:n}=B(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new os(r):new ds(r)}function xa(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function fe(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let l=0;l<8;l++)n.setUint8(l,t[e+l]);return n.getFloat64(0,!0)}function cs(t){const e=xa(t);let r=0;const n=e[r];r+=1;const l=new DataView(e.buffer),c=l.getUint32(r,n===1);if(r+=4,c&536870912&&(l.getUint32(r,n===1),r+=4),(c&65535)===1){const _=fe(e,r);r+=8;const S=fe(e,r);return r+=8,[_,S]}throw new Error("Unsupported geometry type")}var Ur,Er;class ms extends(Er=N,Ur=d,Er){constructor(e){super(e,"array","PgGeometry")}build(e){return new ps(e,this.config)}}s(ms,Ur,"PgGeometryBuilder");var Or,$r;class ps extends($r=b,Or=d,$r){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return cs(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}s(ps,Or,"PgGeometry");var jr,kr;class fs extends(kr=N,jr=d,kr){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new gs(e,this.config)}}s(fs,jr,"PgGeometryObjectBuilder");var Rr,Gr;class gs extends(Gr=b,Rr=d,Gr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=cs(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}s(gs,Rr,"PgGeometryObject");function Ba(t,e){const{name:r,config:n}=B(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new ms(r):new fs(r)}var Xr,Jr;class hs extends(Jr=N,Xr=d,Jr){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new _s(e,this.config)}}s(hs,Xr,"PgRealBuilder");var Hr,Wr;class _s extends(Wr=b,Hr=d,Wr){constructor(r,n){super(r,n);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}s(_s,Hr,"PgReal");function Ca(t){return new hs(t??"")}var Yr,Zr;class ys extends(Zr=N,Yr=d,Zr){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new bs(e,this.config)}}s(ys,Yr,"PgSerialBuilder");var en,tn;class bs extends(tn=b,en=d,tn){getSQLType(){return"serial"}}s(bs,en,"PgSerial");function H(t){return new ys(t??"")}var rn,nn;class ws extends(nn=k,rn=d,nn){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Ns(e,this.config)}}s(ws,rn,"PgSmallIntBuilder");var sn,an;class Ns extends(an=b,sn=d,an){constructor(){super(...arguments);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}s(Ns,sn,"PgSmallInt");function qa(t){return new ws(t??"")}var on,un;class Ts extends(un=N,on=d,un){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ss(e,this.config)}}s(Ts,on,"PgSmallSerialBuilder");var dn,ln;class Ss extends(ln=b,dn=d,ln){getSQLType(){return"smallserial"}}s(Ss,dn,"PgSmallSerial");function Va(t){return new Ts(t??"")}var cn,mn;class Is extends(mn=N,cn=d,mn){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new As(e,this.config)}}s(Is,cn,"PgTextBuilder");var pn,fn;class As extends(fn=b,pn=d,fn){constructor(){super(...arguments);s(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}s(As,pn,"PgText");function i(t,e={}){const{name:r,config:n}=B(t,e);return new Is(r,n)}var gn,hn;class vs extends(hn=O,gn=d,hn){constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(e){return new Ps(e,this.config)}}s(vs,gn,"PgTimeBuilder");var _n,yn;class Ps extends(yn=b,_n=d,yn){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Ps,_n,"PgTime");function La(t,e={}){const{name:r,config:n}=B(t,e);return new vs(r,n.withTimezone??!1,n.precision)}var bn,wn;class zs extends(wn=O,bn=d,wn){constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Ds(e,this.config)}}s(zs,bn,"PgTimestampBuilder");var Nn,Tn;class Ds extends(Tn=b,Nn=d,Tn){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");s(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));s(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Ds,Nn,"PgTimestamp");var Sn,In;class xs extends(In=O,Sn=d,In){constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Bs(e,this.config)}}s(xs,Sn,"PgTimestampStringBuilder");var An,vn;class Bs extends(vn=b,An=d,vn){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Bs,An,"PgTimestampString");function u(t,e={}){const{name:r,config:n}=B(t,e);return(n==null?void 0:n.mode)==="string"?new xs(r,n.withTimezone??!1,n.precision):new zs(r,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var Pn,zn;class Cs extends(zn=N,Pn=d,zn){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(f`gen_random_uuid()`)}build(e){return new qs(e,this.config)}}s(Cs,Pn,"PgUUIDBuilder");var Dn,xn;class qs extends(xn=b,Dn=d,xn){getSQLType(){return"uuid"}}s(qs,Dn,"PgUUID");function a(t){return new Cs(t??"")}var Bn,Cn;class Vs extends(Cn=N,Bn=d,Cn){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Ls(e,this.config)}}s(Vs,Bn,"PgVarcharBuilder");var qn,Vn;class Ls extends(Vn=b,qn=d,Vn){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}s(Ls,qn,"PgVarchar");function Fa(t,e={}){const{name:r,config:n}=B(t,e);return new Vs(r,n)}var Ln,Fn;class Fs extends(Fn=N,Ln=d,Fn){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Ms(e,this.config)}}s(Fs,Ln,"PgBinaryVectorBuilder");var Mn,Qn;class Ms extends(Qn=b,Mn=d,Qn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}s(Ms,Mn,"PgBinaryVector");function Ma(t,e){const{name:r,config:n}=B(t,e);return new Fs(r,n)}var Kn,Un;class Qs extends(Un=N,Kn=d,Un){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new Ks(e,this.config)}}s(Qs,Kn,"PgHalfVectorBuilder");var En,On;class Ks extends(On=b,En=d,On){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(Ks,En,"PgHalfVector");function Qa(t,e){const{name:r,config:n}=B(t,e);return new Qs(r,n)}var $n,jn;class Us extends(jn=N,$n=d,jn){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Es(e,this.config)}}s(Us,$n,"PgSparseVectorBuilder");var kn,Rn;class Es extends(Rn=b,kn=d,Rn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}s(Es,kn,"PgSparseVector");function Ka(t,e){const{name:r,config:n}=B(t,e);return new Us(r,n)}var Gn,Xn;class Os extends(Xn=N,Gn=d,Xn){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new $s(e,this.config)}}s(Os,Gn,"PgVectorBuilder");var Jn,Hn;class $s extends(Hn=b,Jn=d,Hn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s($s,Jn,"PgVector");function Ua(t,e){const{name:r,config:n}=B(t,e);return new Os(r,n)}function Ea(){return{bigint:ha,bigserial:_a,boolean:q,char:ya,cidr:ba,customType:wa,date:Na,doublePrecision:Ta,inet:Sa,integer:L,interval:Ia,json:Aa,jsonb:x,line:va,macaddr:Pa,macaddr8:za,numeric:p,point:Da,geometry:Ba,real:Ca,serial:H,smallint:qa,smallserial:Va,text:i,time:La,timestamp:u,uuid:a,varchar:Fa,bit:Ma,halfvec:Qa,sparsevec:Ka,vector:Ua}}const ne=Symbol.for("drizzle:PgInlineForeignKeys"),ge=Symbol.for("drizzle:EnableRLS");var Wn,Yn,Zn,ei,ti;class j extends(ti=V,ei=d,Zn=ne,Yn=ge,Wn=V.Symbol.ExtraConfigBuilder,ti){constructor(){super(...arguments);s(this,Zn,[]);s(this,Yn,!1);s(this,Wn)}}s(j,ei,"PgTable"),s(j,"Symbol",Object.assign({},V.Symbol,{InlineForeignKeys:ne,EnableRLS:ge}));function Oa(t,e,r,n,l=t){const c=new j(t,n,l),_=typeof e=="function"?e(Ea()):e,S=Object.fromEntries(Object.entries(_).map(([m,M])=>{const I=M;I.setName(m);const D=I.build(c);return c[ne].push(...I.buildForeignKeys(D,c)),[m,D]})),T=Object.fromEntries(Object.entries(_).map(([m,M])=>{const I=M;I.setName(m);const D=I.buildExtraConfigColumn(c);return[m,D]})),A=Object.assign(c,S);return A[V.Symbol.Columns]=S,A[V.Symbol.ExtraConfigColumns]=T,r&&(A[j.Symbol.ExtraConfigBuilder]=r),Object.assign(A,{enableRLS:()=>(A[j.Symbol.EnableRLS]=!0,A)})}const g=(t,e,r)=>Oa(t,e,r,void 0),v={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function P(t,e){return e.includes(t.columnType)}function $a(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const ja=o.union([o.string(),o.number(),o.boolean(),o.null()]),ka=o.union([ja,o.record(o.any()),o.array(o.any())]),Ra=o.custom(t=>t instanceof Buffer);function js(t,e){const r=(e==null?void 0:e.zodInstance)??o,n=(e==null?void 0:e.coerce)??{};let l;return $a(t)&&(l=t.enumValues.length?r.enum(t.enumValues):r.string()),l||(P(t,["PgGeometry","PgPointTuple"])?l=r.tuple([r.number(),r.number()]):P(t,["PgGeometryObject","PgPointObject"])?l=r.object({x:r.number(),y:r.number()}):P(t,["PgHalfVector","PgVector"])?(l=r.array(r.number()),l=t.dimensions?l.length(t.dimensions):l):P(t,["PgLine"])?l=r.tuple([r.number(),r.number(),r.number()]):P(t,["PgLineABC"])?l=r.object({a:r.number(),b:r.number(),c:r.number()}):P(t,["PgArray"])?(l=r.array(js(t.baseColumn,r)),l=t.size?l.length(t.size):l):t.dataType==="array"?l=r.array(r.any()):t.dataType==="number"?l=Ga(t,r,n):t.dataType==="bigint"?l=Xa(t,r,n):t.dataType==="boolean"?l=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?l=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?l=Ja(t,r,n):t.dataType==="json"?l=ka:t.dataType==="custom"?l=r.any():t.dataType==="buffer"&&(l=Ra)),l||(l=r.any()),l}function Ga(t,e,r){let n=t.getSQLType().includes("unsigned"),l,c,_=!1;P(t,["MySqlTinyInt","SingleStoreTinyInt"])?(l=n?0:v.INT8_MIN,c=n?v.INT8_UNSIGNED_MAX:v.INT8_MAX,_=!0):P(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(l=n?0:v.INT16_MIN,c=n?v.INT16_UNSIGNED_MAX:v.INT16_MAX,_=!0):P(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(l=n?0:v.INT24_MIN,c=n?v.INT24_UNSIGNED_MAX:v.INT24_MAX,_=P(t,["MySqlMediumInt","SingleStoreMediumInt"])):P(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(l=n?0:v.INT32_MIN,c=n?v.INT32_UNSIGNED_MAX:v.INT32_MAX,_=!0):P(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(l=n?0:v.INT48_MIN,c=n?v.INT48_UNSIGNED_MAX:v.INT48_MAX):P(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||P(t,["MySqlSerial","SingleStoreSerial"]),l=n?0:Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,_=!0):P(t,["MySqlYear","SingleStoreYear"])?(l=1901,c=2155,_=!0):(l=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER);let S=r===!0||r!=null&&r.number?e.coerce.number():e.number();return S=S.min(l).max(c),_?S.int():S}function Xa(t,e,r){const n=t.getSQLType().includes("unsigned"),l=n?0n:v.INT64_MIN,c=n?v.INT64_UNSIGNED_MAX:v.INT64_MAX;return(r===!0||r!=null&&r.bigint?e.coerce.bigint():e.bigint()).min(l).max(c)}function Ja(t,e,r){if(P(t,["PgUUID"]))return e.string().uuid();let n,l,c=!1;P(t,["PgVarchar","SQLiteText"])?n=t.length:P(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??v.INT16_UNSIGNED_MAX:P(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=v.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=v.INT24_UNSIGNED_MAX:t.textType==="text"?n=v.INT16_UNSIGNED_MAX:n=v.INT8_UNSIGNED_MAX),P(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,c=!0),P(t,["PgBinaryVector"])&&(l=/^[01]+$/,n=t.dimensions);let _=r===!0||r!=null&&r.string?e.coerce.string():e.string();return _=l?_.regex(l):_,n&&c?_.length(n):n?_.max(n):_}function ks(t){return fi(t)?fa(t):ga(t)}function Rs(t,e,r,n){const l={};for(const[c,_]of Object.entries(t)){if(!C(_,E)&&!C(_,z)&&!C(_,z.Aliased)&&typeof _=="object"){const M=fi(_)||pa(_)?ks(_):_;l[c]=Rs(M,e[c]??{},r,n);continue}const S=e[c];if(S!==void 0&&typeof S!="function"){l[c]=S;continue}const T=C(_,E)?_:void 0,A=T?js(T,n):o.any(),m=typeof S=="function"?S(A):A;r.never(T)||(l[c]=m,T&&(r.nullable(T)&&(l[c]=l[c].nullable()),r.optional(T)&&(l[c]=l[c].optional())))}return o.object(l)}const Ha={never:t=>{var e,r;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((r=t==null?void 0:t.generatedIdentity)==null?void 0:r.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},w=(t,e)=>{const r=ks(t);return Rs(r,{},Ha)},y=g("hotels",{id:a("id").primaryKey().default(f`gen_random_uuid()`),name:i("name").notNull(),address:i("address"),phone:i("phone"),zip:i("zip"),vatNo:i("vat_no"),isActive:q("is_active").default(!0).notNull(),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0}),settings:x("settings").default("{}")}),Wa=g("roles",{id:H("id").primaryKey(),name:i("name").unique().notNull(),description:i("description")});g("role_creation_permissions",{id:H("id").primaryKey(),creatorRole:i("creator_role").notNull(),createeRole:i("createe_role").notNull(),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});const h=g("users",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),roleId:L("role_id").references(()=>Wa.id),username:i("username").notNull(),fullName:i("full_name"),email:i("email"),phone:i("phone"),address:i("address"),passwordHash:i("password_hash").notNull(),isActive:q("is_active").default(!0),isOnline:q("is_online").default(!1),lastLogin:u("last_login",{withTimezone:!0}),lastLogout:u("last_logout",{withTimezone:!0}),createdBy:a("created_by"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0}),verification:x("verification").default("{}")});g("user_sessions",{id:a("id").primaryKey().default(f`gen_random_uuid()`),userId:a("user_id").references(()=>h.id,{onDelete:"cascade"}),jwtToken:i("jwt_token"),deviceInfo:i("device_info"),ip:i("ip"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),lastSeen:u("last_seen",{withTimezone:!0}).defaultNow(),revokedAt:u("revoked_at",{withTimezone:!0})});const Ya=g("audit_logs",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),userId:a("user_id").references(()=>h.id),action:i("action").notNull(),resourceType:i("resource_type").notNull(),resourceId:i("resource_id"),details:x("details"),ipAddress:i("ip_address"),userAgent:i("user_agent"),success:q("success").default(!0),errorMessage:i("error_message"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),W=g("guests",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),firstName:i("first_name").notNull(),lastName:i("last_name").notNull(),email:i("email"),phone:i("phone").notNull(),address:i("address"),city:i("city"),country:i("country"),idType:i("id_type"),idNumber:i("id_number"),nationality:i("nationality"),dateOfBirth:u("date_of_birth",{withTimezone:!0}),notes:i("notes"),currentReservationId:a("current_reservation_id"),createdBy:a("created_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0})}),Gs=g("room_types",{id:H("id").primaryKey(),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),name:i("name"),description:i("description"),priceInhouse:p("price_inhouse",{precision:12,scale:2}),priceWalkin:p("price_walkin",{precision:12,scale:2})}),$=g("rooms",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),roomNumber:i("room_number"),roomTypeId:L("room_type_id").references(()=>Gs.id),status:i("status").default("available"),currentReservationId:a("current_reservation_id"),isOccupied:q("is_occupied").default(!1),occupantDetails:x("occupant_details"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0})}),Za=g("room_status_logs",{id:a("id").primaryKey().default(f`gen_random_uuid()`),roomId:a("room_id").references(()=>$.id),roomNumber:i("room_number"),previousStatus:i("previous_status"),newStatus:i("new_status"),reason:i("reason"),changedBy:a("changed_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),Xs=g("halls",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),name:i("name"),capacity:L("capacity"),priceInhouse:p("price_inhouse",{precision:12,scale:2}),priceWalkin:p("price_walkin",{precision:12,scale:2}),hourlyRate:p("hourly_rate",{precision:12,scale:2}),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),eo=g("pools",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),name:i("name"),priceInhouse:p("price_inhouse",{precision:12,scale:2}),priceWalkin:p("price_walkin",{precision:12,scale:2}),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),Js=g("services",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),kind:i("kind"),name:i("name"),priceInhouse:p("price_inhouse",{precision:12,scale:2}),priceWalkin:p("price_walkin",{precision:12,scale:2})}),Y=g("inventory_items",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),sku:i("sku"),name:i("name").notNull(),description:i("description"),unit:i("unit"),stockQty:p("stock_qty",{precision:12,scale:3}).default("0"),packageUnit:i("package_unit"),baseUnit:i("base_unit"),baseUnitsPerPackage:p("base_units_per_package",{precision:12,scale:3}),packageStockQty:p("package_stock_qty",{precision:12,scale:3}).default("0"),baseStockQty:p("base_stock_qty",{precision:12,scale:3}).default("0"),reorderLevel:p("reorder_level",{precision:12,scale:3}).default("0"),storageLocation:i("storage_location"),costPerUnit:p("cost_per_unit",{precision:12,scale:2}).default("0"),departments:i("departments").array().default(f`ARRAY[]::text[]`),measurementCategory:i("measurement_category").default("weight"),conversionProfile:x("conversion_profile").default("{}"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0})});g("inventory_consumptions",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),itemId:a("item_id").references(()=>Y.id),qty:p("qty",{precision:12,scale:3}).notNull(),unit:i("unit"),reason:i("reason"),referenceEntity:i("reference_entity"),createdBy:a("created_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});const to=g("wastages",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),itemId:a("item_id").references(()=>Y.id),qty:p("qty",{precision:12,scale:3}).notNull(),unit:i("unit"),reason:i("reason").notNull(),recordedBy:a("recorded_by").references(()=>h.id),status:i("status").default("pending_approval"),approvedBy:a("approved_by").references(()=>h.id),approvedAt:u("approved_at",{withTimezone:!0}),estimatedValue:p("estimated_value",{precision:12,scale:2}),rejectionReason:i("rejection_reason"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("inventory_transactions",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),itemId:a("item_id").references(()=>Y.id),transactionType:i("transaction_type").notNull(),qtyPackage:p("qty_package",{precision:12,scale:3}),qtyBase:p("qty_base",{precision:12,scale:3}),issuedToUserId:a("issued_to_user_id").references(()=>h.id),department:i("department"),notes:i("notes"),recordedBy:a("recorded_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});const Hs=g("vendors",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),name:i("name"),contact:x("contact"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),Ws=g("transactions",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),txnType:i("txn_type").notNull(),amount:p("amount",{precision:14,scale:2}).notNull(),currency:i("currency").default("NPR"),paymentMethod:i("payment_method"),vendorId:a("vendor_id").references(()=>Hs.id),purpose:i("purpose"),reference:i("reference"),details:x("details"),createdBy:a("created_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0}),isVoided:q("is_voided").default(!1),voidedBy:a("voided_by").references(()=>h.id),voidedAt:u("voided_at",{withTimezone:!0}),voidReason:i("void_reason")}),Ys=g("maintenance_requests",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),reportedBy:a("reported_by").references(()=>h.id),title:i("title").notNull(),location:i("location"),description:i("description"),photo:i("photo"),priority:i("priority").default("medium"),status:i("status").default("pending"),assignedTo:a("assigned_to").references(()=>h.id),approvedBy:a("approved_by").references(()=>h.id),approvedAt:u("approved_at",{withTimezone:!0}),declinedBy:a("declined_by").references(()=>h.id),declinedAt:u("declined_at",{withTimezone:!0}),declineReason:i("decline_reason"),resolvedAt:u("resolved_at",{withTimezone:!0}),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),ro=g("maintenance_status_history",{id:a("id").primaryKey().default(f`gen_random_uuid()`),requestId:a("request_id").references(()=>Ys.id,{onDelete:"cascade"}),previousStatus:i("previous_status"),newStatus:i("new_status").notNull(),changedBy:a("changed_by").references(()=>h.id),notes:i("notes"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),Zs=g("tasks",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),createdBy:a("created_by").references(()=>h.id),assignedTo:a("assigned_to").references(()=>h.id),title:i("title").notNull(),description:i("description"),status:i("status").default("pending"),priority:i("priority").default("medium"),dueDate:u("due_date",{withTimezone:!0}),context:x("context"),approvedBy:a("approved_by").references(()=>h.id),approvedAt:u("approved_at",{withTimezone:!0}),completionNotes:i("completion_notes"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),no=g("room_cleaning_queue",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),roomId:a("room_id").references(()=>$.id),roomNumber:i("room_number").notNull(),guestName:i("guest_name"),guestId:a("guest_id").references(()=>W.id),checkoutAt:u("checkout_at",{withTimezone:!0}).defaultNow(),status:i("status").default("pending"),taskId:a("task_id").references(()=>Zs.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),io=g("restaurant_tables",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),name:i("name"),capacity:L("capacity"),location:i("location"),status:i("status").default("available"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),so=g("menu_categories",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),name:i("name")}),ao=g("menu_items",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),categoryId:a("category_id").references(()=>so.id),name:i("name"),price:p("price",{precision:12,scale:2}),description:i("description"),active:q("active").default(!0),recipe:x("recipe"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),oo=g("kot_orders",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),tableId:a("table_id").references(()=>io.id),createdBy:a("created_by").references(()=>h.id),status:i("status").default("open"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),uo=g("kot_items",{id:a("id").primaryKey().default(f`gen_random_uuid()`),kotId:a("kot_id").references(()=>oo.id,{onDelete:"cascade"}),menuItemId:a("menu_item_id"),description:i("description"),qty:L("qty").default(1),unit:i("unit"),inventoryUsage:x("inventory_usage"),status:i("status").default("pending"),declineReason:i("decline_reason"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("kot_audit_logs",{id:a("id").primaryKey().default(f`gen_random_uuid()`),kotItemId:a("kot_item_id").references(()=>uo.id),action:i("action").notNull(),performedBy:a("performed_by").references(()=>h.id),reason:i("reason"),previousStatus:i("previous_status"),newStatus:i("new_status"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("payments",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),payerId:a("payer_id").references(()=>h.id),amount:p("amount",{precision:12,scale:2}).notNull(),method:i("method"),reference:i("reference"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("password_resets",{id:a("id").primaryKey().default(f`gen_random_uuid()`),userId:a("user_id").references(()=>h.id),token:i("token"),expiresAt:u("expires_at",{withTimezone:!0}),used:q("used").default(!1),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});const lo=g("attendance",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),userId:a("user_id").references(()=>h.id),clockInTime:u("clock_in_time",{withTimezone:!0}).notNull(),clockOutTime:u("clock_out_time",{withTimezone:!0}),clockInLocation:i("clock_in_location"),clockOutLocation:i("clock_out_location"),clockInIp:i("clock_in_ip"),clockOutIp:i("clock_out_ip"),totalHours:p("total_hours",{precision:10,scale:2}),status:i("status").default("active").notNull(),clockInSource:i("clock_in_source"),clockOutSource:i("clock_out_source"),notes:i("notes"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),co=g("leave_requests",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),requestedBy:a("requested_by").references(()=>h.id),approvedBy:a("approved_by").references(()=>h.id),leaveType:i("leave_type").notNull(),startDate:u("start_date",{withTimezone:!0}).notNull(),endDate:u("end_date",{withTimezone:!0}).notNull(),reason:i("reason"),status:i("status").default("pending"),managerNotes:i("manager_notes"),approvalDate:u("approval_date",{withTimezone:!0}),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),mo=g("leave_policies",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),leaveType:i("leave_type").notNull(),displayName:i("display_name").notNull(),defaultDays:L("default_days").notNull(),isActive:q("is_active").default(!0),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()},t=>({uniqueHotelLeaveType:ie().on(t.hotelId,t.leaveType)})),po=g("leave_balances",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),userId:a("user_id").references(()=>h.id),leaveType:i("leave_type").notNull(),totalDays:p("total_days",{precision:5,scale:1}).notNull(),usedDays:p("used_days",{precision:5,scale:1}).default("0"),remainingDays:p("remaining_days",{precision:5,scale:1}).notNull(),year:L("year").notNull(),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()},t=>({uniqueUserLeaveType:ie().on(t.userId,t.leaveType,t.year)})),fo=g("notifications",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),userId:a("user_id").references(()=>h.id),type:i("type").notNull(),title:i("title").notNull(),message:i("message").notNull(),relatedId:a("related_id"),isRead:q("is_read").default(!1),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("hotel_taxes",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),taxType:i("tax_type").notNull(),percent:p("percent",{precision:5,scale:2}),isActive:q("is_active").default(!0),createdAt:u("created_at",{withTimezone:!0}).defaultNow()},t=>({uniqueHotelTax:ie().on(t.hotelId,t.taxType)}));const ea=g("vouchers",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),code:i("code").unique().notNull(),discountAmount:p("discount_amount",{precision:12,scale:2}),discountType:i("discount_type"),validFrom:u("valid_from",{withTimezone:!0}),validUntil:u("valid_until",{withTimezone:!0}),maxUses:L("max_uses"),usedCount:L("used_count").default(0),createdBy:a("created_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),ta=g("vehicle_logs",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),vehicleNumber:i("vehicle_number").notNull(),vehicleType:i("vehicle_type"),driverName:i("driver_name"),purpose:i("purpose"),checkIn:u("check_in",{withTimezone:!0}).defaultNow(),checkOut:u("check_out",{withTimezone:!0}),recordedBy:a("recorded_by").references(()=>h.id)}),go=g("security_alerts",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),type:i("type").notNull(),description:i("description").notNull(),vehicleLogId:a("vehicle_log_id").references(()=>ta.id),performedBy:a("performed_by").references(()=>h.id),overriddenBy:a("overridden_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("room_service_orders",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),roomId:a("room_id").references(()=>$.id),requestedBy:a("requested_by").references(()=>h.id),status:i("status").default("pending"),specialInstructions:i("special_instructions"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});const oe=g("meal_plans",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),planType:i("plan_type").notNull(),planName:i("plan_name").notNull(),pricePerPerson:p("price_per_person",{precision:12,scale:2}).notNull(),description:i("description"),isActive:q("is_active").default(!0),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),ho=g("meal_vouchers",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),roomId:a("room_id").references(()=>$.id),guestName:i("guest_name").notNull(),mealPlanId:a("meal_plan_id").references(()=>oe.id),mealPlanType:i("meal_plan_type").notNull(),numberOfPersons:L("number_of_persons").notNull(),voucherDate:u("voucher_date",{withTimezone:!0}).notNull(),status:i("status").default("unused"),usedAt:u("used_at",{withTimezone:!0}),redeemedBy:a("redeemed_by").references(()=>h.id),notes:i("notes"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),ue=g("room_reservations",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),guestId:a("guest_id").references(()=>W.id),guestName:i("guest_name").notNull(),guestEmail:i("guest_email"),guestPhone:i("guest_phone").notNull(),roomId:a("room_id").references(()=>$.id).notNull(),checkInDate:u("check_in_date",{withTimezone:!0}).notNull(),checkOutDate:u("check_out_date",{withTimezone:!0}).notNull(),numberOfPersons:L("number_of_persons").notNull(),mealPlanId:a("meal_plan_id").references(()=>oe.id),roomPrice:p("room_price",{precision:12,scale:2}),mealPlanPrice:p("meal_plan_price",{precision:12,scale:2}),totalPrice:p("total_price",{precision:12,scale:2}),paidAmount:p("paid_amount",{precision:12,scale:2}).default("0"),specialRequests:i("special_requests"),guestType:i("guest_type").default("walkin"),status:i("status").default("pending"),createdBy:a("created_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),_o=g("room_service_charges",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),reservationId:a("reservation_id").references(()=>ue.id,{onDelete:"cascade"}),serviceId:a("service_id").references(()=>Js.id),serviceName:i("service_name").notNull(),serviceKind:i("service_kind").notNull(),quantity:p("quantity",{precision:12,scale:3}).notNull(),unit:i("unit").notNull(),unitPrice:p("unit_price",{precision:12,scale:2}).notNull(),totalCharge:p("total_charge",{precision:12,scale:2}).notNull(),notes:i("notes"),addedBy:a("added_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),yo=g("stock_requests",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),requestedBy:a("requested_by").references(()=>h.id).notNull(),itemId:a("item_id").references(()=>Y.id).notNull(),quantity:p("quantity",{precision:12,scale:3}).notNull(),unit:i("unit").notNull(),status:i("status").default("pending").notNull(),approvedBy:a("approved_by").references(()=>h.id),approvedAt:u("approved_at",{withTimezone:!0}),deliveredAt:u("delivered_at",{withTimezone:!0}),department:i("department"),notes:i("notes"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),bo=g("service_packages",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),name:i("name").notNull(),description:i("description"),basePrice:p("base_price",{precision:12,scale:2}).notNull(),items:x("items").default("[]"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),ra=g("hall_bookings",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),hallId:a("hall_id").references(()=>Xs.id).notNull(),customerName:i("customer_name").notNull(),customerPhone:i("customer_phone").notNull(),customerEmail:i("customer_email"),guestId:a("guest_id").references(()=>W.id),isInHouseGuest:q("is_in_house_guest").default(!1),bookingStartTime:u("booking_start_time",{withTimezone:!0}).notNull(),bookingEndTime:u("booking_end_time",{withTimezone:!0}).notNull(),duration:p("duration",{precision:6,scale:2}),numberOfPeople:L("number_of_people"),actualNumberOfPeople:L("actual_number_of_people"),hallBasePrice:p("hall_base_price",{precision:12,scale:2}),foodServices:x("food_services").default("[]"),otherServices:x("other_services").default("[]"),servicePackages:x("service_packages").default("[]"),customServices:i("custom_services"),totalAmount:p("total_amount",{precision:12,scale:2}).notNull(),advancePaid:p("advance_paid",{precision:12,scale:2}).default("0"),balanceDue:p("balance_due",{precision:12,scale:2}).notNull(),paymentMethod:i("payment_method"),status:i("status").default("quotation").notNull(),specialRequests:i("special_requests"),createdBy:a("created_by").references(()=>h.id),confirmedBy:a("confirmed_by").references(()=>h.id),cancelledBy:a("cancelled_by").references(()=>h.id),cancellationReason:i("cancellation_reason"),finalizedBy:a("finalized_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),confirmedAt:u("confirmed_at",{withTimezone:!0}),cancelledAt:u("cancelled_at",{withTimezone:!0}),finalizedAt:u("finalized_at",{withTimezone:!0})}),wo=g("booking_payments",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id,{onDelete:"cascade"}),bookingId:a("booking_id").references(()=>ra.id,{onDelete:"cascade"}),amount:p("amount",{precision:12,scale:2}).notNull(),paymentMethod:i("payment_method").notNull(),receiptNumber:i("receipt_number"),notes:i("notes"),recordedBy:a("recorded_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),na=g("restaurant_bills",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),billNumber:i("bill_number").notNull(),tableIds:i("table_ids").array().notNull(),orderIds:i("order_ids").array().notNull(),subtotal:p("subtotal",{precision:14,scale:2}).notNull(),taxBreakdown:x("tax_breakdown").default("{}"),totalTax:p("total_tax",{precision:14,scale:2}).default("0"),discount:p("discount",{precision:14,scale:2}).default("0"),voucherId:a("voucher_id").references(()=>ea.id),voucherCode:i("voucher_code"),tipType:i("tip_type"),tipValue:p("tip_value",{precision:12,scale:2}).default("0"),tipAmount:p("tip_amount",{precision:12,scale:2}).default("0"),serviceCharge:p("service_charge",{precision:12,scale:2}).default("0"),grandTotal:p("grand_total",{precision:14,scale:2}).notNull(),splitMode:i("split_mode"),splitDetails:x("split_details"),items:x("items").default("[]"),status:i("status").default("draft").notNull(),amendmentNote:i("amendment_note"),originalBillId:a("original_bill_id"),createdBy:a("created_by").references(()=>h.id),amendedBy:a("amended_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),amendedAt:u("amended_at",{withTimezone:!0}),finalizedAt:u("finalized_at",{withTimezone:!0})}),No=g("bill_payments",{id:a("id").primaryKey().default(f`gen_random_uuid()`),billId:a("bill_id").references(()=>na.id,{onDelete:"cascade"}),hotelId:a("hotel_id").references(()=>y.id),amount:p("amount",{precision:14,scale:2}).notNull(),paymentMethod:i("payment_method").notNull(),transactionId:a("transaction_id").references(()=>Ws.id),reference:i("reference"),receivedBy:a("received_by").references(()=>h.id),isVoided:q("is_voided").default(!1),voidedAt:u("voided_at",{withTimezone:!0}),voidedBy:a("voided_by").references(()=>h.id),voidReason:i("void_reason"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});w(h).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});w(Ya).omit({id:!0,createdAt:!0});w(y).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});w($).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});w(Za).omit({id:!0,createdAt:!0});w(ao).omit({id:!0,createdAt:!0}).extend({price:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=99999999},{message:"Price must be a non-negative number (max 99,999,999)"})});w(Zs).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({dueDate:o.union([o.string(),o.date(),o.null(),o.undefined()]).transform(t=>t?t instanceof Date?t:new Date(t):null).optional()});w(no).omit({id:!0,createdAt:!0,updatedAt:!0});w(Ws).omit({id:!0,createdAt:!0,deletedAt:!0}).refine(t=>t.txnType&&(t.txnType.includes("_in")||t.txnType==="revenue")?t.paymentMethod&&["cash","pos","fonepay"].includes(t.paymentMethod):t.txnType==="vendor_payment"?t.paymentMethod&&["cash","cheque","bank_transfer","digital_wallet","pos","fonepay"].includes(t.paymentMethod):!0,{message:"Invalid payment method for this transaction type",path:["paymentMethod"]});w(Ys).omit({id:!0,createdAt:!0,updatedAt:!0,approvedAt:!0,declinedAt:!0});w(ro).omit({id:!0,createdAt:!0});w(ea).omit({id:!0,createdAt:!0,usedCount:!0}).extend({validFrom:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t)),validUntil:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t))});w(Gs).omit({id:!0});w(Xs).omit({id:!0,createdAt:!0});w(eo).omit({id:!0,createdAt:!0});w(Js).omit({id:!0});w(co).omit({id:!0,createdAt:!0,updatedAt:!0,approvalDate:!0}).extend({startDate:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t)),endDate:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t))});w(mo).omit({id:!0,createdAt:!0,updatedAt:!0});w(po).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({totalDays:o.union([o.string(),o.number()]).transform(t=>String(t)),usedDays:o.union([o.string(),o.number()]).transform(t=>String(t)).optional(),remainingDays:o.union([o.string(),o.number()]).transform(t=>String(t))});w(fo).omit({id:!0,createdAt:!0});w(to).omit({id:!0,createdAt:!0});w(ta).omit({id:!0,hotelId:!0,recordedBy:!0,checkIn:!0});w(go).omit({id:!0,createdAt:!0});w(oe).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({pricePerPerson:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=99999999},{message:"Price per person must be a non-negative number (max 99,999,999)"})});w(ho).omit({id:!0,createdAt:!0}).extend({voucherDate:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t))});w(ue).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({checkInDate:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t)),checkOutDate:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t))});w(_o).omit({id:!0,createdAt:!0}).extend({quantity:o.union([o.string(),o.number()]).transform(t=>String(t)),unitPrice:o.union([o.string(),o.number()]).transform(t=>String(t)),totalCharge:o.union([o.string(),o.number()]).transform(t=>String(t))});w(Hs).omit({id:!0,createdAt:!0});const Po=w(W).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0,currentReservationId:!0});w(yo).omit({id:!0,createdAt:!0,updatedAt:!0,approvedAt:!0,deliveredAt:!0}).extend({quantity:o.union([o.string(),o.number()]).transform(t=>String(t))});const zo=w(ra).omit({id:!0,createdAt:!0,updatedAt:!0,confirmedAt:!0,cancelledAt:!0}).extend({bookingStartTime:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t)),bookingEndTime:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t)),numberOfPeople:o.union([o.string(),o.number()]).transform(t=>Number(t)).refine(t=>t>=1&&t<=1e5,{message:"Number of people must be between 1 and 100,000"}),hallBasePrice:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=99999999},{message:"Hall base price must be a non-negative number (max 99,999,999)"}),totalAmount:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=99999999},{message:"Total amount must be a non-negative number (max 99,999,999)"}),advancePaid:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=99999999},{message:"Advance paid must be a non-negative number (max 99,999,999)"}),balanceDue:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=-99999999&&e<=99999999},{message:"Balance due must be a valid number (between -99,999,999 and 99,999,999)"})});w(bo).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({basePrice:o.union([o.string(),o.number()]).transform(t=>String(t))});w(wo).omit({id:!0,createdAt:!0}).extend({amount:o.union([o.string(),o.number()]).transform(t=>String(t))});o.object({status:o.enum(["pending","approved","declined","ready","served","completed","cancelled"]).optional(),qty:o.number().int().min(1).optional(),declineReason:o.string().optional(),inventoryVerified:o.boolean().optional()}).refine(t=>!t.status||t.status!=="declined"||t.declineReason&&t.declineReason.trim().length>=10,{message:"Decline reason requires minimum 10 characters when declining a KOT item",path:["declineReason"]}).refine(t=>!t.status||t.status!=="cancelled"||t.declineReason&&t.declineReason.trim().length>=10,{message:"Cancellation reason requires minimum 10 characters",path:["declineReason"]});w(lo).omit({id:!0,createdAt:!0,updatedAt:!0});w(na).omit({id:!0,createdAt:!0,amendedAt:!0,finalizedAt:!0}).extend({subtotal:o.union([o.string(),o.number()]).transform(t=>String(t)),totalTax:o.union([o.string(),o.number()]).transform(t=>String(t)),discount:o.union([o.string(),o.number()]).transform(t=>String(t)),tipValue:o.union([o.string(),o.number()]).transform(t=>String(t)),tipAmount:o.union([o.string(),o.number()]).transform(t=>String(t)),serviceCharge:o.union([o.string(),o.number()]).transform(t=>String(t)),grandTotal:o.union([o.string(),o.number()]).transform(t=>String(t))});w(No).omit({id:!0,createdAt:!0,voidedAt:!0}).extend({amount:o.union([o.string(),o.number()]).transform(t=>String(t))});const To=g("checkout_override_logs",{id:a("id").primaryKey().default(f`gen_random_uuid()`),reservationId:a("reservation_id").references(()=>ue.id),balanceDue:p("balance_due",{precision:14,scale:2}),overriddenBy:a("overridden_by").references(()=>h.id),reason:i("reason"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});w(To).omit({id:!0,createdAt:!0}).extend({balanceDue:o.union([o.string(),o.number()]).transform(t=>String(t))});const So=g("price_change_logs",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),itemId:a("item_id"),itemType:i("item_type"),itemName:i("item_name"),previousPrice:p("previous_price",{precision:12,scale:2}),newPrice:p("new_price",{precision:12,scale:2}),changedBy:a("changed_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});w(So).omit({id:!0,createdAt:!0}).extend({previousPrice:o.union([o.string(),o.number()]).transform(t=>String(t)),newPrice:o.union([o.string(),o.number()]).transform(t=>String(t))});const Io=g("tax_change_logs",{id:a("id").primaryKey().default(f`gen_random_uuid()`),hotelId:a("hotel_id").references(()=>y.id),taxType:i("tax_type").notNull(),previousPercent:p("previous_percent",{precision:5,scale:2}),newPercent:p("new_percent",{precision:5,scale:2}),previousActive:q("previous_active"),newActive:q("new_active"),changedBy:a("changed_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});w(Io).omit({id:!0,createdAt:!0}).extend({previousPercent:o.union([o.string(),o.number(),o.null()]).transform(t=>t===null?null:String(t)),newPercent:o.union([o.string(),o.number(),o.null()]).transform(t=>t===null?null:String(t))});export{zo as a,Po as i};
