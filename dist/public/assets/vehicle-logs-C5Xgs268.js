import{r as p,l as j,j as e,C as l,a as n,m as v,n as y,y as f,s as N,I as b}from"./index-CuDmVYun.js";import{D as C,a9 as h}from"./dashboard-layout-RBv1DXX2.js";import{f as m}from"./format-BOBWS5Wu.js";import"./users-DXv82DeH.js";import"./circle-alert-CPwmOhkC.js";function S(){const[t,o]=p.useState(""),{data:a=[],isLoading:x}=j({queryKey:["/api/hotels/current/vehicle-logs"],refetchInterval:3e3}),u=a.filter(s=>!s.checkOut),c=a.filter(s=>{var r,i,d;return t===""||s.vehicleNumber.toLowerCase().includes(t.toLowerCase())||((r=s.driverName)==null?void 0:r.toLowerCase().includes(t.toLowerCase()))||((d=(i=s.recordedByUser)==null?void 0:i.username)==null?void 0:d.toLowerCase().includes(t.toLowerCase()))});return e.jsx(C,{title:"Vehicle Logs",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(l,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehicles On Premises"}),e.jsx("p",{className:"text-4xl font-bold",children:u.length})]}),e.jsx(h,{className:"h-12 w-12 text-purple-500"})]})})}),e.jsxs(l,{children:[e.jsxs(v,{children:[e.jsx(y,{children:"All Vehicle Logs"}),e.jsx(f,{children:e.jsxs("div",{className:"mt-2",children:[e.jsx(N,{htmlFor:"vehicleSearch",children:"Search"}),e.jsx(b,{id:"vehicleSearch","data-testid":"input-vehicle-search",placeholder:"Search by vehicle number, driver name, or recorded by...",value:t,onChange:s=>o(s.target.value),className:"mt-1"})]})})]}),e.jsx(n,{children:x?e.jsx("div",{className:"text-center py-8","data-testid":"loading-vehicles",children:"Loading vehicle logs..."}):c.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"no-vehicles",children:t?"No matching vehicles found.":"No vehicle logs yet."}):e.jsx("div",{className:"space-y-3",children:c.map(s=>{var r;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors","data-testid":`vehicle-${s.id}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[e.jsx(h,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("span",{className:"font-semibold text-lg","data-testid":`vehicle-number-${s.id}`,children:s.vehicleNumber}),e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-blue-100 text-blue-800",children:s.vehicleType})]}),e.jsxs("div",{className:"text-sm text-muted-foreground ml-8",children:[e.jsxs("p",{children:["Driver: ",s.driverName]}),s.purpose&&e.jsxs("p",{children:["Purpose: ",s.purpose]}),e.jsxs("p",{children:["Recorded by: ",((r=s.recordedByUser)==null?void 0:r.username)||"Unknown"]}),e.jsxs("p",{className:"mt-1",children:["Check-in: ",m(new Date(s.checkIn),"MMM dd, yyyy HH:mm")]}),s.checkOut&&e.jsxs("p",{children:["Check-out: ",m(new Date(s.checkOut),"MMM dd, yyyy HH:mm")]})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.checkOut?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800"}`,"data-testid":`vehicle-status-${s.id}`,children:s.checkOut?"Checked Out":"On Premises"})})]},s.id)})})})]})]})})}export{S as default};
