import{q as C,l as o,j as e,C as n,a as c,m as x,n as h,au as l,B as i}from"./index-CuDmVYun.js";import{D as M,S as u,i as j,a9 as m,T as f,I as q}from"./dashboard-layout-RBv1DXX2.js";import{S as d}from"./stats-card-CKM6aMdl.js";import{f as g}from"./format-BOBWS5Wu.js";import"./users-DXv82DeH.js";import"./circle-alert-CPwmOhkC.js";function B(){const{user:t}=C(),{data:p=[]}=o({queryKey:["/api/hotels/current/security/tasks"],refetchInterval:3e3}),{data:v=[]}=o({queryKey:["/api/hotels/current/vehicle-logs"],refetchInterval:3e3}),{data:y=[]}=o({queryKey:["/api/hotels/current/maintenance-requests"],refetchInterval:3e3}),a=p.filter(s=>s.assignedTo===(t==null?void 0:t.id)),N=a.filter(s=>s.status==="pending"),k=a.filter(s=>s.status==="in_progress");a.filter(s=>s.status==="completed");const r=v.filter(s=>s.recordedBy===(t==null?void 0:t.id)),w=r.filter(s=>!s.checkOut),b=y.filter(s=>s.reportedBy===(t==null?void 0:t.id)).filter(s=>s.status==="pending");return e.jsx(M,{title:"Surveillance Officer Dashboard",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(n,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(u,{className:"h-12 w-12 text-primary"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:["Welcome, ",t==null?void 0:t.username]}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and secure the premises"})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{title:"Pending Tasks",value:N.length,icon:e.jsx(j,{}),iconColor:"text-orange-500"}),e.jsx(d,{title:"In Progress",value:k.length,icon:e.jsx(u,{}),iconColor:"text-blue-500"}),e.jsx(d,{title:"Active Vehicles",value:w.length,icon:e.jsx(m,{}),iconColor:"text-purple-500"}),e.jsx(d,{title:"Pending Maintenance",value:b.length,icon:e.jsx(f,{}),iconColor:"text-red-500"})]}),e.jsxs(n,{children:[e.jsx(x,{children:e.jsx(h,{children:"Quick Actions"})}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(l,{href:"/surveillance-officer/duty-status",children:e.jsxs(i,{className:"w-full",variant:"outline","data-testid":"link-duty-status",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Duty Status"]})}),e.jsx(l,{href:"/surveillance-officer/vehicle-logs",children:e.jsxs(i,{className:"w-full",variant:"outline","data-testid":"link-vehicle-logs",children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),"Vehicle Check-in/Out"]})}),e.jsx(l,{href:"/surveillance-officer/my-tasks",children:e.jsxs(i,{className:"w-full",variant:"outline","data-testid":"link-my-tasks",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"View My Tasks"]})}),e.jsx(l,{href:"/surveillance-officer/maintenance-reports",children:e.jsxs(i,{className:"w-full",variant:"outline","data-testid":"link-maintenance",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Report Maintenance"]})})]})})]}),e.jsxs(n,{children:[e.jsx(x,{children:e.jsx(h,{children:"Recent Tasks"})}),e.jsx(c,{children:a.length===0?e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No tasks assigned yet."}):e.jsxs("div",{className:"space-y-3",children:[a.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.dueDate&&`Due: ${g(new Date(s.dueDate),"MMM dd, yyyy")}`})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.status.replace("_"," ")})]},s.id)),a.length>3&&e.jsx(l,{href:"/surveillance-officer/my-tasks",children:e.jsx(i,{variant:"link",className:"w-full",children:"View all tasks →"})})]})})]}),e.jsxs(n,{children:[e.jsx(x,{children:e.jsx(h,{children:"Recent Vehicle Logs"})}),e.jsx(c,{children:r.length===0?e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No vehicle logs yet."}):e.jsxs("div",{className:"space-y-3",children:[r.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"h-4 w-4"}),e.jsx("p",{className:"font-medium",children:s.vehicleNumber}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["• ",s.driverName]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:g(new Date(s.checkIn),"MMM dd, HH:mm")})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.checkOut?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800"}`,children:s.checkOut?"Checked Out":"On Premises"})]},s.id)),r.length>3&&e.jsx(l,{href:"/surveillance-officer/vehicle-logs",children:e.jsx(i,{variant:"link",className:"w-full",children:"View all logs →"})})]})})]})]})})}export{B as default};
