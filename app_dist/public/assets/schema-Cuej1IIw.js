var aa=Object.defineProperty;var oa=(t,e,r)=>e in t?aa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var a=(t,e,r)=>oa(t,typeof e!="symbol"?e+"":e,r);import{z as o}from"./index-Dk6nXF67.js";const d=Symbol.for("drizzle:entityKind");function C(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,d))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(d in r&&r[d]===e[d])return!0;r=Object.getPrototypeOf(r)}return!1}var he;he=d;class O{constructor(e,r){a(this,"name");a(this,"keyAsName");a(this,"primary");a(this,"notNull");a(this,"default");a(this,"defaultFn");a(this,"onUpdateFn");a(this,"hasDefault");a(this,"isUnique");a(this,"uniqueName");a(this,"uniqueType");a(this,"dataType");a(this,"columnType");a(this,"enumValues");a(this,"generated");a(this,"generatedIdentity");a(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}a(O,he,"Column");var _e;_e=d;class tn{constructor(e,r,i){a(this,"config");a(this,"$default",this.$defaultFn);a(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}a(tn,_e,"ColumnBuilder");const K=Symbol.for("drizzle:Name");var ye;ye=d;class rn{constructor(e,r){a(this,"reference");a(this,"_onUpdate","no action");a(this,"_onDelete","no action");this.reference=()=>{const{name:i,columns:l,foreignColumns:c}=e();return{name:i,columns:l,foreignTable:c[0].table,foreignColumns:c}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new nn(e,this)}}a(rn,ye,"PgForeignKeyBuilder");var we;we=d;class nn{constructor(e,r){a(this,"reference");a(this,"onUpdate");a(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:i}=this.reference(),l=r.map(S=>S.name),c=i.map(S=>S.name),y=[this.table[K],...l,i[0].table[K],...c];return e??`${y.join("_")}_fk`}}a(nn,we,"PgForeignKey");function ua(t,...e){return t(...e)}function k(t){return new on(t)}function sn(t,e){return`${t[K]}_${e.join("_")}_unique`}var be;be=d;class an{constructor(e,r){a(this,"columns");a(this,"nullsNotDistinctConfig",!1);this.name=r,this.columns=e}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new un(e,this.columns,this.nullsNotDistinctConfig,this.name)}}a(an,be,"PgUniqueConstraintBuilder");var Ne;Ne=d;class on{constructor(e){a(this,"name");this.name=e}on(...e){return new an(e,this.name)}}a(on,Ne,"PgUniqueOnConstraintBuilder");var Te;Te=d;class un{constructor(e,r,i,l){a(this,"columns");a(this,"name");a(this,"nullsNotDistinct",!1);this.table=e,this.columns=r,this.name=l??sn(this.table,this.columns.map(c=>c.name)),this.nullsNotDistinct=i}getName(){return this.name}}a(un,Te,"PgUniqueConstraint");function de(t,e,r){for(let i=e;i<t.length;i++){const l=t[i];if(l==="\\"){i++;continue}if(l==='"')return[t.slice(e,i).replace(/\\/g,""),i+1];if(!r&&(l===","||l==="}"))return[t.slice(e,i).replace(/\\/g,""),i]}return[t.slice(e).replace(/\\/g,""),t.length]}function dn(t,e=0){const r=[];let i=e,l=!1;for(;i<t.length;){const c=t[i];if(c===","){(l||i===e)&&r.push(""),l=!0,i++;continue}if(l=!1,c==="\\"){i+=2;continue}if(c==='"'){const[T,A]=de(t,i+1,!0);r.push(T),i=A;continue}if(c==="}")return[r,i+1];if(c==="{"){const[T,A]=dn(t,i+1);r.push(T),i=A;continue}const[y,S]=de(t,i,!1);r.push(y),i=S}return[r,i]}function da(t){const[e]=dn(t,1);return e}function ln(t){return`{${t.map(e=>Array.isArray(e)?ln(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Se,ve;class N extends(ve=tn,Se=d,ve){constructor(){super(...arguments);a(this,"foreignKeyConfigs",[])}array(r){return new mn(this.config.name,this,r)}references(r,i={}){return this.foreignKeyConfigs.push({ref:r,actions:i}),this}unique(r,i){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=i==null?void 0:i.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,i){return this.foreignKeyConfigs.map(({ref:l,actions:c})=>ua((y,S)=>{const T=new rn(()=>{const A=y();return{columns:[r],foreignColumns:[A]}});return S.onUpdate&&T.onUpdate(S.onUpdate),S.onDelete&&T.onDelete(S.onDelete),T.build(i)},l,c))}buildExtraConfigColumn(r){return new cn(r,this.config)}}a(N,Se,"PgColumnBuilder");var Ie,Ae;class b extends(Ae=O,Ie=d,Ae){constructor(e,r){r.uniqueName||(r.uniqueName=sn(e,[r.name])),super(e,r),this.table=e}}a(b,Ie,"PgColumn");var Pe,ze;class cn extends(ze=b,Pe=d,ze){constructor(){super(...arguments);a(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});a(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}a(cn,Pe,"ExtraConfigColumn");var De,xe;class mn extends(xe=N,De=d,xe){constructor(e,r,i){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=i}build(e){const r=this.config.baseBuilder.build(e);return new ie(e,this.config,r)}}a(mn,De,"PgArrayBuilder");var Be,qe;const J=class J extends(qe=b,Be=d,qe){constructor(r,i,l,c){super(r,i);a(this,"size");this.baseColumn=l,this.range=c,this.size=i.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=da(r)),r.map(i=>this.baseColumn.mapFromDriverValue(i))}mapToDriverValue(r,i=!1){const l=r.map(c=>c===null?null:C(this.baseColumn,J)?this.baseColumn.mapToDriverValue(c,!0):this.baseColumn.mapToDriverValue(c));return i?l:ln(l)}};a(J,Be,"PgArray");let ie=J;const le=Symbol.for("drizzle:isPgEnum");function la(t){return!!t&&typeof t=="function"&&le in t&&t[le]===!0}var Ce;Ce=d;class se{constructor(e,r,i,l=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:i,isWith:l}}}a(se,Ce,"Subquery");const ca={startActiveSpan(t,e){return e()}},U=Symbol.for("drizzle:ViewBaseConfig"),ee=Symbol.for("drizzle:Schema"),ce=Symbol.for("drizzle:Columns"),me=Symbol.for("drizzle:ExtraConfigColumns"),te=Symbol.for("drizzle:OriginalName"),re=Symbol.for("drizzle:BaseName"),G=Symbol.for("drizzle:IsAlias"),pe=Symbol.for("drizzle:ExtraConfigBuilder"),pn=Symbol.for("drizzle:IsDrizzleTable");var Ve,Le,Fe,Me,Qe,Ke,Ue,Oe,Ee,$e;$e=d,Ee=K,Oe=te,Ue=ee,Ke=ce,Qe=me,Me=re,Fe=G,Le=pn,Ve=pe;class L{constructor(e,r,i){a(this,Ee);a(this,Oe);a(this,Ue);a(this,Ke);a(this,Qe);a(this,Me);a(this,Fe,!1);a(this,Le,!0);a(this,Ve);this[K]=this[te]=e,this[ee]=r,this[re]=i}}a(L,$e,"Table"),a(L,"Symbol",{Name:K,Schema:ee,OriginalName:te,Columns:ce,ExtraConfigColumns:me,BaseName:re,IsAlias:G,ExtraConfigBuilder:pe});function fn(t){return typeof t=="object"&&t!==null&&pn in t}function ma(t){return t!=null&&typeof t.getSQL=="function"}function pa(t){var r;const e={sql:"",params:[]};for(const i of t)e.sql+=i.sql,e.params.push(...i.params),(r=i.typings)!=null&&r.length&&(e.typings||(e.typings=[]),e.typings.push(...i.typings));return e}var je;je=d;class F{constructor(e){a(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new D([this])}}a(F,je,"StringChunk");var ke;ke=d;const Q=class Q{constructor(e){a(this,"decoder",gn);a(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return ca.startActiveSpan("drizzle.buildSQL",r=>{const i=this.buildQueryFromSourceParams(this.queryChunks,e);return r==null||r.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,r){const i=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:l,escapeName:c,escapeParam:y,prepareTyping:S,inlineParams:T,paramStartIndex:A}=i;return pa(e.map(m=>{var M;if(C(m,F))return{sql:m.value.join(""),params:[]};if(C(m,X))return{sql:c(m.value),params:[]};if(m===void 0)return{sql:"",params:[]};if(Array.isArray(m)){const v=[new F("(")];for(const[x,sa]of m.entries())v.push(sa),x<m.length-1&&v.push(new F(", "));return v.push(new F(")")),this.buildQueryFromSourceParams(v,i)}if(C(m,Q))return this.buildQueryFromSourceParams(m.queryChunks,{...i,inlineParams:T||m.shouldInlineParams});if(C(m,L)){const v=m[L.Symbol.Schema],x=m[L.Symbol.Name];return{sql:v===void 0||m[G]?c(x):c(v)+"."+c(x),params:[]}}if(C(m,O)){const v=l.getColumnCasing(m);if(r.invokeSource==="indexes")return{sql:c(v),params:[]};const x=m.table[L.Symbol.Schema];return{sql:m.table[G]||x===void 0?c(m.table[L.Symbol.Name])+"."+c(v):c(x)+"."+c(m.table[L.Symbol.Name])+"."+c(v),params:[]}}if(C(m,yn)){const v=m[U].schema,x=m[U].name;return{sql:v===void 0||m[U].isAlias?c(x):c(v)+"."+c(x),params:[]}}if(C(m,ae)){if(C(m.value,H))return{sql:y(A.value++,m),params:[m],typings:["none"]};const v=m.value===null?null:m.encoder.mapToDriverValue(m.value);if(C(v,Q))return this.buildQueryFromSourceParams([v],i);if(T)return{sql:this.mapInlineParam(v,i),params:[]};let x=["none"];return S&&(x=[S(m.encoder)]),{sql:y(A.value++,v),params:[v],typings:x}}return C(m,H)?{sql:y(A.value++,m),params:[m],typings:["none"]}:C(m,Q.Aliased)&&m.fieldAlias!==void 0?{sql:c(m.fieldAlias),params:[]}:C(m,se)?m._.isWith?{sql:c(m._.alias),params:[]}:this.buildQueryFromSourceParams([new F("("),m._.sql,new F(") "),new X(m._.alias)],i):la(m)?m.schema?{sql:c(m.schema)+"."+c(m.enumName),params:[]}:{sql:c(m.enumName),params:[]}:ma(m)?(M=m.shouldOmitSQLParens)!=null&&M.call(m)?this.buildQueryFromSourceParams([m.getSQL()],i):this.buildQueryFromSourceParams([new F("("),m.getSQL(),new F(")")],i):T?{sql:this.mapInlineParam(m,i),params:[]}:{sql:y(A.value++,m),params:[m],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const i=e.toString();return r(i==="[object Object]"?JSON.stringify(e):i)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Q.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};a(Q,ke,"SQL");let D=Q;var Re;Re=d;class X{constructor(e){a(this,"brand");this.value=e}getSQL(){return new D([this])}}a(X,Re,"Name");const gn={mapFromDriverValue:t=>t},hn={mapToDriverValue:t=>t};({...gn,...hn});var Ge;Ge=d;class ae{constructor(e,r=hn){a(this,"brand");this.value=e,this.encoder=r}getSQL(){return new D([this])}}a(ae,Ge,"Param");function f(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new F(t[0]));for(const[i,l]of e.entries())r.push(l,new F(t[i+1]));return new D(r)}(t=>{function e(){return new D([])}t.empty=e;function r(T){return new D(T)}t.fromList=r;function i(T){return new D([new F(T)])}t.raw=i;function l(T,A){const m=[];for(const[M,v]of T.entries())M>0&&A!==void 0&&m.push(A),m.push(v);return new D(m)}t.join=l;function c(T){return new X(T)}t.identifier=c;function y(T){return new H(T)}t.placeholder=y;function S(T,A){return new ae(T,A)}t.param=S})(f||(f={}));(t=>{var r;r=d;const i=class i{constructor(c,y){a(this,"isSelectionField",!1);this.sql=c,this.fieldAlias=y}getSQL(){return this.sql}clone(){return new i(this.sql,this.fieldAlias)}};a(i,r,"SQL.Aliased");let e=i;t.Aliased=e})(D||(D={}));var Xe;Xe=d;class H{constructor(e){this.name=e}getSQL(){return new D([this])}}a(H,Xe,"Placeholder");const _n=Symbol.for("drizzle:IsDrizzleView");var He,Je,We;We=d,Je=U,He=_n;class yn{constructor({name:e,schema:r,selectedFields:i,query:l}){a(this,Je);a(this,He,!0);this[U]={name:e,originalName:e,schema:r,selectedFields:i,query:l,isExisting:!l,isAlias:!1}}getSQL(){return new D([this])}}a(yn,We,"View");function fa(t){return typeof t=="object"&&t!==null&&_n in t}O.prototype.getSQL=function(){return new D([this])};L.prototype.getSQL=function(){return new D([this])};se.prototype.getSQL=function(){return new D([this])};function ga(t){return t[L.Symbol.Columns]}function ha(t){return t[U].selectedFields}function q(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var Ye,Ze;class R extends(Ze=N,Ye=d,Ze){generatedAlwaysAsIdentity(e){if(e){const{name:r,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}a(R,Ye,"PgIntColumnBaseBuilder");var et,tt;class wn extends(tt=R,et=d,tt){constructor(e){super(e,"number","PgBigInt53")}build(e){return new bn(e,this.config)}}a(wn,et,"PgBigInt53Builder");var rt,it;class bn extends(it=b,rt=d,it){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}a(bn,rt,"PgBigInt53");var nt,st;class Nn extends(st=R,nt=d,st){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Tn(e,this.config)}}a(Nn,nt,"PgBigInt64Builder");var at,ot;class Tn extends(ot=b,at=d,ot){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}a(Tn,at,"PgBigInt64");function _a(t,e){const{name:r,config:i}=q(t,e);return i.mode==="number"?new wn(r):new Nn(r)}var ut,dt;class Sn extends(dt=N,ut=d,dt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new vn(e,this.config)}}a(Sn,ut,"PgBigSerial53Builder");var lt,ct;class vn extends(ct=b,lt=d,ct){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}a(vn,lt,"PgBigSerial53");var mt,pt;class In extends(pt=N,mt=d,pt){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new An(e,this.config)}}a(In,mt,"PgBigSerial64Builder");var ft,gt;class An extends(gt=b,ft=d,gt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}a(An,ft,"PgBigSerial64");function ya(t,e){const{name:r,config:i}=q(t,e);return i.mode==="number"?new Sn(r):new In(r)}var ht,_t;class Pn extends(_t=N,ht=d,_t){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new zn(e,this.config)}}a(Pn,ht,"PgBooleanBuilder");var yt,wt;class zn extends(wt=b,yt=d,wt){getSQLType(){return"boolean"}}a(zn,yt,"PgBoolean");function I(t){return new Pn(t??"")}var bt,Nt;class Dn extends(Nt=N,bt=d,Nt){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new xn(e,this.config)}}a(Dn,bt,"PgCharBuilder");var Tt,St;class xn extends(St=b,Tt=d,St){constructor(){super(...arguments);a(this,"length",this.config.length);a(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}a(xn,Tt,"PgChar");function wa(t,e={}){const{name:r,config:i}=q(t,e);return new Dn(r,i)}var vt,It;class Bn extends(It=N,vt=d,It){constructor(e){super(e,"string","PgCidr")}build(e){return new qn(e,this.config)}}a(Bn,vt,"PgCidrBuilder");var At,Pt;class qn extends(Pt=b,At=d,Pt){getSQLType(){return"cidr"}}a(qn,At,"PgCidr");function ba(t){return new Bn(t??"")}var zt,Dt;class Cn extends(Dt=N,zt=d,Dt){constructor(e,r,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=i}build(e){return new Vn(e,this.config)}}a(Cn,zt,"PgCustomColumnBuilder");var xt,Bt;class Vn extends(Bt=b,xt=d,Bt){constructor(r,i){super(r,i);a(this,"sqlName");a(this,"mapTo");a(this,"mapFrom");this.sqlName=i.customTypeParams.dataType(i.fieldConfig),this.mapTo=i.customTypeParams.toDriver,this.mapFrom=i.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}a(Vn,xt,"PgCustomColumn");function Na(t){return(e,r)=>{const{name:i,config:l}=q(e,r);return new Cn(i,l,t)}}var qt,Ct;class E extends(Ct=N,qt=d,Ct){defaultNow(){return this.default(f`now()`)}}a(E,qt,"PgDateColumnBaseBuilder");var Vt,Lt;class Ln extends(Lt=E,Vt=d,Lt){constructor(e){super(e,"date","PgDate")}build(e){return new Fn(e,this.config)}}a(Ln,Vt,"PgDateBuilder");var Ft,Mt;class Fn extends(Mt=b,Ft=d,Mt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}a(Fn,Ft,"PgDate");var Qt,Kt;class Mn extends(Kt=E,Qt=d,Kt){constructor(e){super(e,"string","PgDateString")}build(e){return new Qn(e,this.config)}}a(Mn,Qt,"PgDateStringBuilder");var Ut,Ot;class Qn extends(Ot=b,Ut=d,Ot){getSQLType(){return"date"}}a(Qn,Ut,"PgDateString");function Ta(t,e){const{name:r,config:i}=q(t,e);return(i==null?void 0:i.mode)==="date"?new Ln(r):new Mn(r)}var Et,$t;class Kn extends($t=N,Et=d,$t){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Un(e,this.config)}}a(Kn,Et,"PgDoublePrecisionBuilder");var jt,kt;class Un extends(kt=b,jt=d,kt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}a(Un,jt,"PgDoublePrecision");function Sa(t){return new Kn(t??"")}var Rt,Gt;class On extends(Gt=N,Rt=d,Gt){constructor(e){super(e,"string","PgInet")}build(e){return new En(e,this.config)}}a(On,Rt,"PgInetBuilder");var Xt,Ht;class En extends(Ht=b,Xt=d,Ht){getSQLType(){return"inet"}}a(En,Xt,"PgInet");function va(t){return new On(t??"")}var Jt,Wt;class $n extends(Wt=R,Jt=d,Wt){constructor(e){super(e,"number","PgInteger")}build(e){return new jn(e,this.config)}}a($n,Jt,"PgIntegerBuilder");var Yt,Zt;class jn extends(Zt=b,Yt=d,Zt){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}a(jn,Yt,"PgInteger");function V(t){return new $n(t??"")}var er,tr;class kn extends(tr=N,er=d,tr){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new Rn(e,this.config)}}a(kn,er,"PgIntervalBuilder");var rr,ir;class Rn extends(ir=b,rr=d,ir){constructor(){super(...arguments);a(this,"fields",this.config.intervalConfig.fields);a(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",i=this.precision?`(${this.precision})`:"";return`interval${r}${i}`}}a(Rn,rr,"PgInterval");function Ia(t,e={}){const{name:r,config:i}=q(t,e);return new kn(r,i)}var nr,sr;class Gn extends(sr=N,nr=d,sr){constructor(e){super(e,"json","PgJson")}build(e){return new Xn(e,this.config)}}a(Gn,nr,"PgJsonBuilder");var ar,or;class Xn extends(or=b,ar=d,or){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}a(Xn,ar,"PgJson");function Aa(t){return new Gn(t??"")}var ur,dr;class Hn extends(dr=N,ur=d,dr){constructor(e){super(e,"json","PgJsonb")}build(e){return new Jn(e,this.config)}}a(Hn,ur,"PgJsonbBuilder");var lr,cr;class Jn extends(cr=b,lr=d,cr){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}a(Jn,lr,"PgJsonb");function B(t){return new Hn(t??"")}var mr,pr;class Wn extends(pr=N,mr=d,pr){constructor(e){super(e,"array","PgLine")}build(e){return new Yn(e,this.config)}}a(Wn,mr,"PgLineBuilder");var fr,gr;class Yn extends(gr=b,fr=d,gr){getSQLType(){return"line"}mapFromDriverValue(e){const[r,i,l]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(i),Number.parseFloat(l)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}a(Yn,fr,"PgLine");var hr,_r;class Zn extends(_r=N,hr=d,_r){constructor(e){super(e,"json","PgLineABC")}build(e){return new es(e,this.config)}}a(Zn,hr,"PgLineABCBuilder");var yr,wr;class es extends(wr=b,yr=d,wr){getSQLType(){return"line"}mapFromDriverValue(e){const[r,i,l]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(i),c:Number.parseFloat(l)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}a(es,yr,"PgLineABC");function Pa(t,e){const{name:r,config:i}=q(t,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new Wn(r):new Zn(r)}var br,Nr;class ts extends(Nr=N,br=d,Nr){constructor(e){super(e,"string","PgMacaddr")}build(e){return new rs(e,this.config)}}a(ts,br,"PgMacaddrBuilder");var Tr,Sr;class rs extends(Sr=b,Tr=d,Sr){getSQLType(){return"macaddr"}}a(rs,Tr,"PgMacaddr");function za(t){return new ts(t??"")}var vr,Ir;class is extends(Ir=N,vr=d,Ir){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new ns(e,this.config)}}a(is,vr,"PgMacaddr8Builder");var Ar,Pr;class ns extends(Pr=b,Ar=d,Pr){getSQLType(){return"macaddr8"}}a(ns,Ar,"PgMacaddr8");function Da(t){return new is(t??"")}var zr,Dr;class ss extends(Dr=N,zr=d,Dr){constructor(e,r,i){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=i}build(e){return new as(e,this.config)}}a(ss,zr,"PgNumericBuilder");var xr,Br;class as extends(Br=b,xr=d,Br){constructor(r,i){super(r,i);a(this,"precision");a(this,"scale");this.precision=i.precision,this.scale=i.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}a(as,xr,"PgNumeric");function p(t,e){const{name:r,config:i}=q(t,e);return new ss(r,i==null?void 0:i.precision,i==null?void 0:i.scale)}var qr,Cr;class os extends(Cr=N,qr=d,Cr){constructor(e){super(e,"array","PgPointTuple")}build(e){return new us(e,this.config)}}a(os,qr,"PgPointTupleBuilder");var Vr,Lr;class us extends(Lr=b,Vr=d,Lr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,i]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}a(us,Vr,"PgPointTuple");var Fr,Mr;class ds extends(Mr=N,Fr=d,Mr){constructor(e){super(e,"json","PgPointObject")}build(e){return new ls(e,this.config)}}a(ds,Fr,"PgPointObjectBuilder");var Qr,Kr;class ls extends(Kr=b,Qr=d,Kr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}a(ls,Qr,"PgPointObject");function xa(t,e){const{name:r,config:i}=q(t,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new os(r):new ds(r)}function Ba(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function fe(t,e){const r=new ArrayBuffer(8),i=new DataView(r);for(let l=0;l<8;l++)i.setUint8(l,t[e+l]);return i.getFloat64(0,!0)}function cs(t){const e=Ba(t);let r=0;const i=e[r];r+=1;const l=new DataView(e.buffer),c=l.getUint32(r,i===1);if(r+=4,c&536870912&&(l.getUint32(r,i===1),r+=4),(c&65535)===1){const y=fe(e,r);r+=8;const S=fe(e,r);return r+=8,[y,S]}throw new Error("Unsupported geometry type")}var Ur,Or;class ms extends(Or=N,Ur=d,Or){constructor(e){super(e,"array","PgGeometry")}build(e){return new ps(e,this.config)}}a(ms,Ur,"PgGeometryBuilder");var Er,$r;class ps extends($r=b,Er=d,$r){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return cs(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}a(ps,Er,"PgGeometry");var jr,kr;class fs extends(kr=N,jr=d,kr){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new gs(e,this.config)}}a(fs,jr,"PgGeometryObjectBuilder");var Rr,Gr;class gs extends(Gr=b,Rr=d,Gr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=cs(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}a(gs,Rr,"PgGeometryObject");function qa(t,e){const{name:r,config:i}=q(t,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new ms(r):new fs(r)}var Xr,Hr;class hs extends(Hr=N,Xr=d,Hr){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new _s(e,this.config)}}a(hs,Xr,"PgRealBuilder");var Jr,Wr;class _s extends(Wr=b,Jr=d,Wr){constructor(r,i){super(r,i);a(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}a(_s,Jr,"PgReal");function Ca(t){return new hs(t??"")}var Yr,Zr;class ys extends(Zr=N,Yr=d,Zr){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ws(e,this.config)}}a(ys,Yr,"PgSerialBuilder");var ei,ti;class ws extends(ti=b,ei=d,ti){getSQLType(){return"serial"}}a(ws,ei,"PgSerial");function W(t){return new ys(t??"")}var ri,ii;class bs extends(ii=R,ri=d,ii){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Ns(e,this.config)}}a(bs,ri,"PgSmallIntBuilder");var ni,si;class Ns extends(si=b,ni=d,si){constructor(){super(...arguments);a(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}a(Ns,ni,"PgSmallInt");function Va(t){return new bs(t??"")}var ai,oi;class Ts extends(oi=N,ai=d,oi){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ss(e,this.config)}}a(Ts,ai,"PgSmallSerialBuilder");var ui,di;class Ss extends(di=b,ui=d,di){getSQLType(){return"smallserial"}}a(Ss,ui,"PgSmallSerial");function La(t){return new Ts(t??"")}var li,ci;class vs extends(ci=N,li=d,ci){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new Is(e,this.config)}}a(vs,li,"PgTextBuilder");var mi,pi;class Is extends(pi=b,mi=d,pi){constructor(){super(...arguments);a(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}a(Is,mi,"PgText");function n(t,e={}){const{name:r,config:i}=q(t,e);return new vs(r,i)}var fi,gi;class As extends(gi=E,fi=d,gi){constructor(e,r,i){super(e,"string","PgTime"),this.withTimezone=r,this.precision=i,this.config.withTimezone=r,this.config.precision=i}build(e){return new Ps(e,this.config)}}a(As,fi,"PgTimeBuilder");var hi,_i;class Ps extends(_i=b,hi=d,_i){constructor(r,i){super(r,i);a(this,"withTimezone");a(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}a(Ps,hi,"PgTime");function Fa(t,e={}){const{name:r,config:i}=q(t,e);return new As(r,i.withTimezone??!1,i.precision)}var yi,wi;class zs extends(wi=E,yi=d,wi){constructor(e,r,i){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=i}build(e){return new Ds(e,this.config)}}a(zs,yi,"PgTimestampBuilder");var bi,Ni;class Ds extends(Ni=b,bi=d,Ni){constructor(r,i){super(r,i);a(this,"withTimezone");a(this,"precision");a(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));a(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}a(Ds,bi,"PgTimestamp");var Ti,Si;class xs extends(Si=E,Ti=d,Si){constructor(e,r,i){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=i}build(e){return new Bs(e,this.config)}}a(xs,Ti,"PgTimestampStringBuilder");var vi,Ii;class Bs extends(Ii=b,vi=d,Ii){constructor(r,i){super(r,i);a(this,"withTimezone");a(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}a(Bs,vi,"PgTimestampString");function u(t,e={}){const{name:r,config:i}=q(t,e);return(i==null?void 0:i.mode)==="string"?new xs(r,i.withTimezone??!1,i.precision):new zs(r,(i==null?void 0:i.withTimezone)??!1,i==null?void 0:i.precision)}var Ai,Pi;class qs extends(Pi=N,Ai=d,Pi){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(f`gen_random_uuid()`)}build(e){return new Cs(e,this.config)}}a(qs,Ai,"PgUUIDBuilder");var zi,Di;class Cs extends(Di=b,zi=d,Di){getSQLType(){return"uuid"}}a(Cs,zi,"PgUUID");function s(t){return new qs(t??"")}var xi,Bi;class Vs extends(Bi=N,xi=d,Bi){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Ls(e,this.config)}}a(Vs,xi,"PgVarcharBuilder");var qi,Ci;class Ls extends(Ci=b,qi=d,Ci){constructor(){super(...arguments);a(this,"length",this.config.length);a(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}a(Ls,qi,"PgVarchar");function Ma(t,e={}){const{name:r,config:i}=q(t,e);return new Vs(r,i)}var Vi,Li;class Fs extends(Li=N,Vi=d,Li){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Ms(e,this.config)}}a(Fs,Vi,"PgBinaryVectorBuilder");var Fi,Mi;class Ms extends(Mi=b,Fi=d,Mi){constructor(){super(...arguments);a(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}a(Ms,Fi,"PgBinaryVector");function Qa(t,e){const{name:r,config:i}=q(t,e);return new Fs(r,i)}var Qi,Ki;class Qs extends(Ki=N,Qi=d,Ki){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new Ks(e,this.config)}}a(Qs,Qi,"PgHalfVectorBuilder");var Ui,Oi;class Ks extends(Oi=b,Ui=d,Oi){constructor(){super(...arguments);a(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}a(Ks,Ui,"PgHalfVector");function Ka(t,e){const{name:r,config:i}=q(t,e);return new Qs(r,i)}var Ei,$i;class Us extends($i=N,Ei=d,$i){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Os(e,this.config)}}a(Us,Ei,"PgSparseVectorBuilder");var ji,ki;class Os extends(ki=b,ji=d,ki){constructor(){super(...arguments);a(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}a(Os,ji,"PgSparseVector");function Ua(t,e){const{name:r,config:i}=q(t,e);return new Us(r,i)}var Ri,Gi;class Es extends(Gi=N,Ri=d,Gi){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new $s(e,this.config)}}a(Es,Ri,"PgVectorBuilder");var Xi,Hi;class $s extends(Hi=b,Xi=d,Hi){constructor(){super(...arguments);a(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}a($s,Xi,"PgVector");function Oa(t,e){const{name:r,config:i}=q(t,e);return new Es(r,i)}function Ea(){return{bigint:_a,bigserial:ya,boolean:I,char:wa,cidr:ba,customType:Na,date:Ta,doublePrecision:Sa,inet:va,integer:V,interval:Ia,json:Aa,jsonb:B,line:Pa,macaddr:za,macaddr8:Da,numeric:p,point:xa,geometry:qa,real:Ca,serial:W,smallint:Va,smallserial:La,text:n,time:Fa,timestamp:u,uuid:s,varchar:Ma,bit:Qa,halfvec:Ka,sparsevec:Ua,vector:Oa}}const ne=Symbol.for("drizzle:PgInlineForeignKeys"),ge=Symbol.for("drizzle:EnableRLS");var Ji,Wi,Yi,Zi,en;class j extends(en=L,Zi=d,Yi=ne,Wi=ge,Ji=L.Symbol.ExtraConfigBuilder,en){constructor(){super(...arguments);a(this,Yi,[]);a(this,Wi,!1);a(this,Ji)}}a(j,Zi,"PgTable"),a(j,"Symbol",Object.assign({},L.Symbol,{InlineForeignKeys:ne,EnableRLS:ge}));function $a(t,e,r,i,l=t){const c=new j(t,i,l),y=typeof e=="function"?e(Ea()):e,S=Object.fromEntries(Object.entries(y).map(([m,M])=>{const v=M;v.setName(m);const x=v.build(c);return c[ne].push(...v.buildForeignKeys(x,c)),[m,x]})),T=Object.fromEntries(Object.entries(y).map(([m,M])=>{const v=M;v.setName(m);const x=v.buildExtraConfigColumn(c);return[m,x]})),A=Object.assign(c,S);return A[L.Symbol.Columns]=S,A[L.Symbol.ExtraConfigColumns]=T,r&&(A[j.Symbol.ExtraConfigBuilder]=r),Object.assign(A,{enableRLS:()=>(A[j.Symbol.EnableRLS]=!0,A)})}const g=(t,e,r)=>$a(t,e,r,void 0),P={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function z(t,e){return e.includes(t.columnType)}function ja(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const ka=o.union([o.string(),o.number(),o.boolean(),o.null()]),Ra=o.union([ka,o.record(o.any()),o.array(o.any())]),Ga=o.custom(t=>t instanceof Buffer);function js(t,e){const r=(e==null?void 0:e.zodInstance)??o,i=(e==null?void 0:e.coerce)??{};let l;return ja(t)&&(l=t.enumValues.length?r.enum(t.enumValues):r.string()),l||(z(t,["PgGeometry","PgPointTuple"])?l=r.tuple([r.number(),r.number()]):z(t,["PgGeometryObject","PgPointObject"])?l=r.object({x:r.number(),y:r.number()}):z(t,["PgHalfVector","PgVector"])?(l=r.array(r.number()),l=t.dimensions?l.length(t.dimensions):l):z(t,["PgLine"])?l=r.tuple([r.number(),r.number(),r.number()]):z(t,["PgLineABC"])?l=r.object({a:r.number(),b:r.number(),c:r.number()}):z(t,["PgArray"])?(l=r.array(js(t.baseColumn,r)),l=t.size?l.length(t.size):l):t.dataType==="array"?l=r.array(r.any()):t.dataType==="number"?l=Xa(t,r,i):t.dataType==="bigint"?l=Ha(t,r,i):t.dataType==="boolean"?l=i===!0||i.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?l=i===!0||i.date?r.coerce.date():r.date():t.dataType==="string"?l=Ja(t,r,i):t.dataType==="json"?l=Ra:t.dataType==="custom"?l=r.any():t.dataType==="buffer"&&(l=Ga)),l||(l=r.any()),l}function Xa(t,e,r){let i=t.getSQLType().includes("unsigned"),l,c,y=!1;z(t,["MySqlTinyInt","SingleStoreTinyInt"])?(l=i?0:P.INT8_MIN,c=i?P.INT8_UNSIGNED_MAX:P.INT8_MAX,y=!0):z(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(l=i?0:P.INT16_MIN,c=i?P.INT16_UNSIGNED_MAX:P.INT16_MAX,y=!0):z(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(l=i?0:P.INT24_MIN,c=i?P.INT24_UNSIGNED_MAX:P.INT24_MAX,y=z(t,["MySqlMediumInt","SingleStoreMediumInt"])):z(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(l=i?0:P.INT32_MIN,c=i?P.INT32_UNSIGNED_MAX:P.INT32_MAX,y=!0):z(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(l=i?0:P.INT48_MIN,c=i?P.INT48_UNSIGNED_MAX:P.INT48_MAX):z(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(i=i||z(t,["MySqlSerial","SingleStoreSerial"]),l=i?0:Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,y=!0):z(t,["MySqlYear","SingleStoreYear"])?(l=1901,c=2155,y=!0):(l=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER);let S=r===!0||r!=null&&r.number?e.coerce.number():e.number();return S=S.min(l).max(c),y?S.int():S}function Ha(t,e,r){const i=t.getSQLType().includes("unsigned"),l=i?0n:P.INT64_MIN,c=i?P.INT64_UNSIGNED_MAX:P.INT64_MAX;return(r===!0||r!=null&&r.bigint?e.coerce.bigint():e.bigint()).min(l).max(c)}function Ja(t,e,r){if(z(t,["PgUUID"]))return e.string().uuid();let i,l,c=!1;z(t,["PgVarchar","SQLiteText"])?i=t.length:z(t,["MySqlVarChar","SingleStoreVarChar"])?i=t.length??P.INT16_UNSIGNED_MAX:z(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?i=P.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?i=P.INT24_UNSIGNED_MAX:t.textType==="text"?i=P.INT16_UNSIGNED_MAX:i=P.INT8_UNSIGNED_MAX),z(t,["PgChar","MySqlChar","SingleStoreChar"])&&(i=t.length,c=!0),z(t,["PgBinaryVector"])&&(l=/^[01]+$/,i=t.dimensions);let y=r===!0||r!=null&&r.string?e.coerce.string():e.string();return y=l?y.regex(l):y,i&&c?y.length(i):i?y.max(i):y}function ks(t){return fn(t)?ga(t):ha(t)}function Rs(t,e,r,i){const l={};for(const[c,y]of Object.entries(t)){if(!C(y,O)&&!C(y,D)&&!C(y,D.Aliased)&&typeof y=="object"){const M=fn(y)||fa(y)?ks(y):y;l[c]=Rs(M,e[c]??{},r,i);continue}const S=e[c];if(S!==void 0&&typeof S!="function"){l[c]=S;continue}const T=C(y,O)?y:void 0,A=T?js(T,i):o.any(),m=typeof S=="function"?S(A):A;r.never(T)||(l[c]=m,T&&(r.nullable(T)&&(l[c]=l[c].nullable()),r.optional(T)&&(l[c]=l[c].optional())))}return o.object(l)}const Wa={never:t=>{var e,r;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((r=t==null?void 0:t.generatedIdentity)==null?void 0:r.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},w=(t,e)=>{const r=ks(t);return Rs(r,{},Wa)},_=g("hotels",{id:s("id").primaryKey().default(f`gen_random_uuid()`),name:n("name").notNull(),address:n("address"),phone:n("phone"),zip:n("zip"),vatNo:n("vat_no"),isActive:I("is_active").default(!0).notNull(),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0}),settings:B("settings").default("{}")}),Gs=g("roles",{id:W("id").primaryKey(),name:n("name").unique().notNull(),description:n("description")});g("role_creation_permissions",{id:W("id").primaryKey(),creatorRole:n("creator_role").notNull(),createeRole:n("createe_role").notNull(),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});const Ya=g("role_limits",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}).notNull(),roleId:V("role_id").references(()=>Gs.id).notNull(),maxTransactionAmount:p("max_transaction_amount",{precision:12,scale:2}),maxDailyAmount:p("max_daily_amount",{precision:12,scale:2}),requiresApprovalAbove:p("requires_approval_above",{precision:12,scale:2}),canVoidTransactions:I("can_void_transactions").default(!1),canApproveWastage:I("can_approve_wastage").default(!1),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()},t=>({uniqueHotelRole:k().on(t.hotelId,t.roleId)})),h=g("users",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),roleId:V("role_id").references(()=>Gs.id),username:n("username").notNull(),fullName:n("full_name"),email:n("email"),phone:n("phone"),address:n("address"),passwordHash:n("password_hash").notNull(),isActive:I("is_active").default(!0),isOnline:I("is_online").default(!1),lastLogin:u("last_login",{withTimezone:!0}),lastLogout:u("last_logout",{withTimezone:!0}),createdBy:s("created_by"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0}),verification:B("verification").default("{}")});g("user_sessions",{id:s("id").primaryKey().default(f`gen_random_uuid()`),userId:s("user_id").references(()=>h.id,{onDelete:"cascade"}),jwtToken:n("jwt_token"),deviceInfo:n("device_info"),ip:n("ip"),deviceFingerprint:n("device_fingerprint"),browser:n("browser"),os:n("os"),location:n("location"),isNewDevice:I("is_new_device").default(!1),isNewLocation:I("is_new_location").default(!1),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),lastSeen:u("last_seen",{withTimezone:!0}).defaultNow(),revokedAt:u("revoked_at",{withTimezone:!0})});const Za=g("login_history",{id:s("id").primaryKey().default(f`gen_random_uuid()`),userId:s("user_id").references(()=>h.id,{onDelete:"cascade"}),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),deviceFingerprint:n("device_fingerprint"),browser:n("browser"),os:n("os"),ip:n("ip"),location:n("location"),isNewDevice:I("is_new_device").default(!1),isNewLocation:I("is_new_location").default(!1),loginAt:u("login_at",{withTimezone:!0}).defaultNow(),logoutAt:u("logout_at",{withTimezone:!0})}),eo=g("known_devices",{id:s("id").primaryKey().default(f`gen_random_uuid()`),userId:s("user_id").references(()=>h.id,{onDelete:"cascade"}).notNull(),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),deviceFingerprint:n("device_fingerprint").notNull(),browser:n("browser"),os:n("os"),trustStatus:n("trust_status").notNull().default("trusted"),firstSeen:u("first_seen",{withTimezone:!0}).defaultNow(),lastSeen:u("last_seen",{withTimezone:!0}).defaultNow(),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()},t=>({uniqueUserDevice:k().on(t.userId,t.deviceFingerprint)})),to=g("security_settings",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}).unique(),ownerEmail:n("owner_email"),ownerPhone:n("owner_phone"),alertOnNewDevice:I("alert_on_new_device").default(!0),alertOnNewLocation:I("alert_on_new_location").default(!0),alertOnLargeTransaction:I("alert_on_large_transaction").default(!0),largeTransactionThreshold:p("large_transaction_threshold",{precision:12,scale:2}).default("10000"),smtpHost:n("smtp_host"),smtpPort:V("smtp_port"),smtpUser:n("smtp_user"),smtpPassword:n("smtp_password"),smsProvider:n("sms_provider"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),ro=g("audit_logs",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),userId:s("user_id").references(()=>h.id),action:n("action").notNull(),resourceType:n("resource_type").notNull(),resourceId:n("resource_id"),details:B("details"),ipAddress:n("ip_address"),userAgent:n("user_agent"),success:I("success").default(!0),errorMessage:n("error_message"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),Y=g("guests",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),firstName:n("first_name").notNull(),lastName:n("last_name").notNull(),email:n("email"),phone:n("phone").notNull(),address:n("address"),city:n("city"),country:n("country"),idType:n("id_type"),idNumber:n("id_number"),nationality:n("nationality"),dateOfBirth:u("date_of_birth",{withTimezone:!0}),notes:n("notes"),currentReservationId:s("current_reservation_id"),createdBy:s("created_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0})}),Xs=g("room_types",{id:W("id").primaryKey(),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),name:n("name"),description:n("description"),priceInhouse:p("price_inhouse",{precision:12,scale:2}),priceWalkin:p("price_walkin",{precision:12,scale:2})}),$=g("rooms",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),roomNumber:n("room_number"),roomTypeId:V("room_type_id").references(()=>Xs.id),status:n("status").default("available"),currentReservationId:s("current_reservation_id"),isOccupied:I("is_occupied").default(!1),occupantDetails:B("occupant_details"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0})}),io=g("room_status_logs",{id:s("id").primaryKey().default(f`gen_random_uuid()`),roomId:s("room_id").references(()=>$.id),roomNumber:n("room_number"),previousStatus:n("previous_status"),newStatus:n("new_status"),reason:n("reason"),changedBy:s("changed_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),Hs=g("halls",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),name:n("name"),capacity:V("capacity"),priceInhouse:p("price_inhouse",{precision:12,scale:2}),priceWalkin:p("price_walkin",{precision:12,scale:2}),hourlyRate:p("hourly_rate",{precision:12,scale:2}),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),no=g("pools",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),name:n("name"),priceInhouse:p("price_inhouse",{precision:12,scale:2}),priceWalkin:p("price_walkin",{precision:12,scale:2}),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),Js=g("services",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),kind:n("kind"),name:n("name"),priceInhouse:p("price_inhouse",{precision:12,scale:2}),priceWalkin:p("price_walkin",{precision:12,scale:2})}),Z=g("inventory_items",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),sku:n("sku"),name:n("name").notNull(),description:n("description"),unit:n("unit"),stockQty:p("stock_qty",{precision:12,scale:3}).default("0"),packageUnit:n("package_unit"),baseUnit:n("base_unit"),baseUnitsPerPackage:p("base_units_per_package",{precision:12,scale:3}),packageStockQty:p("package_stock_qty",{precision:12,scale:3}).default("0"),baseStockQty:p("base_stock_qty",{precision:12,scale:3}).default("0"),reorderLevel:p("reorder_level",{precision:12,scale:3}).default("0"),storageLocation:n("storage_location"),costPerUnit:p("cost_per_unit",{precision:12,scale:2}).default("0"),departments:n("departments").array().default(f`ARRAY[]::text[]`),measurementCategory:n("measurement_category").default("weight"),conversionProfile:B("conversion_profile").default("{}"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0})});g("inventory_consumptions",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),itemId:s("item_id").references(()=>Z.id),qty:p("qty",{precision:12,scale:3}).notNull(),unit:n("unit"),reason:n("reason"),referenceEntity:n("reference_entity"),createdBy:s("created_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});const so=g("wastages",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),itemId:s("item_id").references(()=>Z.id),qty:p("qty",{precision:12,scale:3}).notNull(),unit:n("unit"),reason:n("reason").notNull(),recordedBy:s("recorded_by").references(()=>h.id),status:n("status").default("pending_approval"),approvedBy:s("approved_by").references(()=>h.id),approvedAt:u("approved_at",{withTimezone:!0}),estimatedValue:p("estimated_value",{precision:12,scale:2}),rejectionReason:n("rejection_reason"),photoUrl:n("photo_url").notNull(),photoTimestamp:u("photo_timestamp",{withTimezone:!0}),photoCapturedByDevice:n("photo_captured_by_device"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("inventory_transactions",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),itemId:s("item_id").references(()=>Z.id),transactionType:n("transaction_type").notNull(),qtyPackage:p("qty_package",{precision:12,scale:3}),qtyBase:p("qty_base",{precision:12,scale:3}),issuedToUserId:s("issued_to_user_id").references(()=>h.id),department:n("department"),notes:n("notes"),recordedBy:s("recorded_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});const Ws=g("vendors",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),name:n("name"),contact:B("contact"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),Ys=g("transactions",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),txnType:n("txn_type").notNull(),amount:p("amount",{precision:14,scale:2}).notNull(),currency:n("currency").default("NPR"),paymentMethod:n("payment_method"),vendorId:s("vendor_id").references(()=>Ws.id),purpose:n("purpose"),reference:n("reference"),details:B("details"),createdBy:s("created_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),deletedAt:u("deleted_at",{withTimezone:!0}),isVoided:I("is_voided").default(!1),voidedBy:s("voided_by").references(()=>h.id),voidedAt:u("voided_at",{withTimezone:!0}),voidReason:n("void_reason"),billPhotoUrl:n("bill_photo_url"),billPdfUrl:n("bill_pdf_url"),billInvoiceNumber:n("bill_invoice_number"),requiresApproval:I("requires_approval").default(!1),approvedBy:s("approved_by").references(()=>h.id),approvedAt:u("approved_at",{withTimezone:!0}),rejectionReason:n("rejection_reason")}),Zs=g("maintenance_requests",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),reportedBy:s("reported_by").references(()=>h.id),title:n("title").notNull(),location:n("location"),description:n("description"),photo:n("photo"),priority:n("priority").default("medium"),status:n("status").default("pending"),assignedTo:s("assigned_to").references(()=>h.id),approvedBy:s("approved_by").references(()=>h.id),approvedAt:u("approved_at",{withTimezone:!0}),declinedBy:s("declined_by").references(()=>h.id),declinedAt:u("declined_at",{withTimezone:!0}),declineReason:n("decline_reason"),resolvedAt:u("resolved_at",{withTimezone:!0}),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),ao=g("maintenance_status_history",{id:s("id").primaryKey().default(f`gen_random_uuid()`),requestId:s("request_id").references(()=>Zs.id,{onDelete:"cascade"}),previousStatus:n("previous_status"),newStatus:n("new_status").notNull(),changedBy:s("changed_by").references(()=>h.id),notes:n("notes"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),ea=g("tasks",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),createdBy:s("created_by").references(()=>h.id),assignedTo:s("assigned_to").references(()=>h.id),title:n("title").notNull(),description:n("description"),status:n("status").default("pending"),priority:n("priority").default("medium"),dueDate:u("due_date",{withTimezone:!0}),context:B("context"),approvedBy:s("approved_by").references(()=>h.id),approvedAt:u("approved_at",{withTimezone:!0}),completionNotes:n("completion_notes"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),oo=g("room_cleaning_queue",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),roomId:s("room_id").references(()=>$.id),roomNumber:n("room_number").notNull(),guestName:n("guest_name"),guestId:s("guest_id").references(()=>Y.id),checkoutAt:u("checkout_at",{withTimezone:!0}).defaultNow(),status:n("status").default("pending"),taskId:s("task_id").references(()=>ea.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),uo=g("restaurant_tables",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),name:n("name"),capacity:V("capacity"),location:n("location"),status:n("status").default("available"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),lo=g("menu_categories",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),name:n("name")}),co=g("menu_items",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),categoryId:s("category_id").references(()=>lo.id),name:n("name"),price:p("price",{precision:12,scale:2}),description:n("description"),active:I("active").default(!0),recipe:B("recipe"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),mo=g("kot_orders",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),tableId:s("table_id").references(()=>uo.id),createdBy:s("created_by").references(()=>h.id),status:n("status").default("open"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),po=g("kot_items",{id:s("id").primaryKey().default(f`gen_random_uuid()`),kotId:s("kot_id").references(()=>mo.id,{onDelete:"cascade"}),menuItemId:s("menu_item_id"),description:n("description"),qty:V("qty").default(1),unit:n("unit"),inventoryUsage:B("inventory_usage"),status:n("status").default("pending"),declineReason:n("decline_reason"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("kot_audit_logs",{id:s("id").primaryKey().default(f`gen_random_uuid()`),kotItemId:s("kot_item_id").references(()=>po.id),action:n("action").notNull(),performedBy:s("performed_by").references(()=>h.id),reason:n("reason"),previousStatus:n("previous_status"),newStatus:n("new_status"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("payments",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),payerId:s("payer_id").references(()=>h.id),amount:p("amount",{precision:12,scale:2}).notNull(),method:n("method"),reference:n("reference"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("password_resets",{id:s("id").primaryKey().default(f`gen_random_uuid()`),userId:s("user_id").references(()=>h.id),token:n("token"),expiresAt:u("expires_at",{withTimezone:!0}),used:I("used").default(!1),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});const fo=g("attendance",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),userId:s("user_id").references(()=>h.id),clockInTime:u("clock_in_time",{withTimezone:!0}).notNull(),clockOutTime:u("clock_out_time",{withTimezone:!0}),clockInLocation:n("clock_in_location"),clockOutLocation:n("clock_out_location"),clockInIp:n("clock_in_ip"),clockOutIp:n("clock_out_ip"),totalHours:p("total_hours",{precision:10,scale:2}),status:n("status").default("active").notNull(),clockInSource:n("clock_in_source"),clockOutSource:n("clock_out_source"),notes:n("notes"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),go=g("leave_requests",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),requestedBy:s("requested_by").references(()=>h.id),approvedBy:s("approved_by").references(()=>h.id),leaveType:n("leave_type").notNull(),startDate:u("start_date",{withTimezone:!0}).notNull(),endDate:u("end_date",{withTimezone:!0}).notNull(),reason:n("reason"),status:n("status").default("pending"),managerNotes:n("manager_notes"),approvalDate:u("approval_date",{withTimezone:!0}),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),ho=g("leave_policies",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),leaveType:n("leave_type").notNull(),displayName:n("display_name").notNull(),defaultDays:V("default_days").notNull(),isActive:I("is_active").default(!0),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()},t=>({uniqueHotelLeaveType:k().on(t.hotelId,t.leaveType)})),_o=g("leave_balances",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),userId:s("user_id").references(()=>h.id),leaveType:n("leave_type").notNull(),totalDays:p("total_days",{precision:5,scale:1}).notNull(),usedDays:p("used_days",{precision:5,scale:1}).default("0"),remainingDays:p("remaining_days",{precision:5,scale:1}).notNull(),year:V("year").notNull(),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()},t=>({uniqueUserLeaveType:k().on(t.userId,t.leaveType,t.year)})),yo=g("notifications",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),userId:s("user_id").references(()=>h.id),type:n("type").notNull(),title:n("title").notNull(),message:n("message").notNull(),relatedId:s("related_id"),isRead:I("is_read").default(!1),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("hotel_taxes",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),taxType:n("tax_type").notNull(),percent:p("percent",{precision:5,scale:2}),isActive:I("is_active").default(!0),createdAt:u("created_at",{withTimezone:!0}).defaultNow()},t=>({uniqueHotelTax:k().on(t.hotelId,t.taxType)}));const ta=g("vouchers",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),code:n("code").unique().notNull(),discountAmount:p("discount_amount",{precision:12,scale:2}),discountType:n("discount_type"),validFrom:u("valid_from",{withTimezone:!0}),validUntil:u("valid_until",{withTimezone:!0}),maxUses:V("max_uses"),usedCount:V("used_count").default(0),createdBy:s("created_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),ra=g("vehicle_logs",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),vehicleNumber:n("vehicle_number").notNull(),vehicleType:n("vehicle_type"),driverName:n("driver_name"),purpose:n("purpose"),checkIn:u("check_in",{withTimezone:!0}).defaultNow(),checkOut:u("check_out",{withTimezone:!0}),recordedBy:s("recorded_by").references(()=>h.id)}),wo=g("security_alerts",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),type:n("type").notNull(),description:n("description").notNull(),vehicleLogId:s("vehicle_log_id").references(()=>ra.id),performedBy:s("performed_by").references(()=>h.id),overriddenBy:s("overridden_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});g("room_service_orders",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),roomId:s("room_id").references(()=>$.id),requestedBy:s("requested_by").references(()=>h.id),status:n("status").default("pending"),specialInstructions:n("special_instructions"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});const oe=g("meal_plans",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),planType:n("plan_type").notNull(),planName:n("plan_name").notNull(),pricePerPerson:p("price_per_person",{precision:12,scale:2}).notNull(),description:n("description"),isActive:I("is_active").default(!0),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),bo=g("meal_vouchers",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),roomId:s("room_id").references(()=>$.id),guestName:n("guest_name").notNull(),mealPlanId:s("meal_plan_id").references(()=>oe.id),mealPlanType:n("meal_plan_type").notNull(),numberOfPersons:V("number_of_persons").notNull(),voucherDate:u("voucher_date",{withTimezone:!0}).notNull(),status:n("status").default("unused"),usedAt:u("used_at",{withTimezone:!0}),redeemedBy:s("redeemed_by").references(()=>h.id),notes:n("notes"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),ue=g("room_reservations",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),guestId:s("guest_id").references(()=>Y.id),guestName:n("guest_name").notNull(),guestEmail:n("guest_email"),guestPhone:n("guest_phone").notNull(),roomId:s("room_id").references(()=>$.id).notNull(),checkInDate:u("check_in_date",{withTimezone:!0}).notNull(),checkOutDate:u("check_out_date",{withTimezone:!0}).notNull(),numberOfPersons:V("number_of_persons").notNull(),mealPlanId:s("meal_plan_id").references(()=>oe.id),roomPrice:p("room_price",{precision:12,scale:2}),mealPlanPrice:p("meal_plan_price",{precision:12,scale:2}),totalPrice:p("total_price",{precision:12,scale:2}),paidAmount:p("paid_amount",{precision:12,scale:2}).default("0"),specialRequests:n("special_requests"),guestType:n("guest_type").default("walkin"),status:n("status").default("pending"),createdBy:s("created_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),No=g("room_service_charges",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),reservationId:s("reservation_id").references(()=>ue.id,{onDelete:"cascade"}),serviceId:s("service_id").references(()=>Js.id),serviceName:n("service_name").notNull(),serviceKind:n("service_kind").notNull(),quantity:p("quantity",{precision:12,scale:3}).notNull(),unit:n("unit").notNull(),unitPrice:p("unit_price",{precision:12,scale:2}).notNull(),totalCharge:p("total_charge",{precision:12,scale:2}).notNull(),notes:n("notes"),addedBy:s("added_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),To=g("stock_requests",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),requestedBy:s("requested_by").references(()=>h.id).notNull(),itemId:s("item_id").references(()=>Z.id).notNull(),quantity:p("quantity",{precision:12,scale:3}).notNull(),unit:n("unit").notNull(),status:n("status").default("pending").notNull(),approvedBy:s("approved_by").references(()=>h.id),approvedAt:u("approved_at",{withTimezone:!0}),deliveredAt:u("delivered_at",{withTimezone:!0}),department:n("department"),notes:n("notes"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),So=g("service_packages",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),name:n("name").notNull(),description:n("description"),basePrice:p("base_price",{precision:12,scale:2}).notNull(),items:B("items").default("[]"),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow()}),ia=g("hall_bookings",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),hallId:s("hall_id").references(()=>Hs.id).notNull(),customerName:n("customer_name").notNull(),customerPhone:n("customer_phone").notNull(),customerEmail:n("customer_email"),guestId:s("guest_id").references(()=>Y.id),isInHouseGuest:I("is_in_house_guest").default(!1),bookingStartTime:u("booking_start_time",{withTimezone:!0}).notNull(),bookingEndTime:u("booking_end_time",{withTimezone:!0}).notNull(),duration:p("duration",{precision:6,scale:2}),numberOfPeople:V("number_of_people"),actualNumberOfPeople:V("actual_number_of_people"),hallBasePrice:p("hall_base_price",{precision:12,scale:2}),foodServices:B("food_services").default("[]"),otherServices:B("other_services").default("[]"),servicePackages:B("service_packages").default("[]"),customServices:n("custom_services"),totalAmount:p("total_amount",{precision:12,scale:2}).notNull(),advancePaid:p("advance_paid",{precision:12,scale:2}).default("0"),balanceDue:p("balance_due",{precision:12,scale:2}).notNull(),paymentMethod:n("payment_method"),status:n("status").default("quotation").notNull(),specialRequests:n("special_requests"),createdBy:s("created_by").references(()=>h.id),confirmedBy:s("confirmed_by").references(()=>h.id),cancelledBy:s("cancelled_by").references(()=>h.id),cancellationReason:n("cancellation_reason"),finalizedBy:s("finalized_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),updatedAt:u("updated_at",{withTimezone:!0}).defaultNow(),confirmedAt:u("confirmed_at",{withTimezone:!0}),cancelledAt:u("cancelled_at",{withTimezone:!0}),finalizedAt:u("finalized_at",{withTimezone:!0})}),vo=g("booking_payments",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id,{onDelete:"cascade"}),bookingId:s("booking_id").references(()=>ia.id,{onDelete:"cascade"}),amount:p("amount",{precision:12,scale:2}).notNull(),paymentMethod:n("payment_method").notNull(),receiptNumber:n("receipt_number"),notes:n("notes"),recordedBy:s("recorded_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()}),na=g("restaurant_bills",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),billNumber:n("bill_number").notNull(),tableIds:n("table_ids").array().notNull(),orderIds:n("order_ids").array().notNull(),subtotal:p("subtotal",{precision:14,scale:2}).notNull(),taxBreakdown:B("tax_breakdown").default("{}"),totalTax:p("total_tax",{precision:14,scale:2}).default("0"),discount:p("discount",{precision:14,scale:2}).default("0"),voucherId:s("voucher_id").references(()=>ta.id),voucherCode:n("voucher_code"),tipType:n("tip_type"),tipValue:p("tip_value",{precision:12,scale:2}).default("0"),tipAmount:p("tip_amount",{precision:12,scale:2}).default("0"),serviceCharge:p("service_charge",{precision:12,scale:2}).default("0"),grandTotal:p("grand_total",{precision:14,scale:2}).notNull(),splitMode:n("split_mode"),splitDetails:B("split_details"),items:B("items").default("[]"),status:n("status").default("draft").notNull(),amendmentNote:n("amendment_note"),originalBillId:s("original_bill_id"),createdBy:s("created_by").references(()=>h.id),amendedBy:s("amended_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow(),amendedAt:u("amended_at",{withTimezone:!0}),finalizedAt:u("finalized_at",{withTimezone:!0})}),Io=g("bill_payments",{id:s("id").primaryKey().default(f`gen_random_uuid()`),billId:s("bill_id").references(()=>na.id,{onDelete:"cascade"}),hotelId:s("hotel_id").references(()=>_.id),amount:p("amount",{precision:14,scale:2}).notNull(),paymentMethod:n("payment_method").notNull(),transactionId:s("transaction_id").references(()=>Ys.id),reference:n("reference"),receivedBy:s("received_by").references(()=>h.id),isVoided:I("is_voided").default(!1),voidedAt:u("voided_at",{withTimezone:!0}),voidedBy:s("voided_by").references(()=>h.id),voidReason:n("void_reason"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});w(h).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});w(ro).omit({id:!0,createdAt:!0});w(_).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});w(Ya).omit({id:!0,createdAt:!0,updatedAt:!0});w($).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});w(io).omit({id:!0,createdAt:!0});w(co).omit({id:!0,createdAt:!0}).extend({price:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=99999999},{message:"Price must be a non-negative number (max 99,999,999)"})});w(ea).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({dueDate:o.union([o.string(),o.date(),o.null(),o.undefined()]).transform(t=>t?t instanceof Date?t:new Date(t):null).optional()});w(oo).omit({id:!0,createdAt:!0,updatedAt:!0});w(Ys).omit({id:!0,createdAt:!0,deletedAt:!0,approvedBy:!0,approvedAt:!0}).refine(t=>t.txnType&&(t.txnType.includes("_in")||t.txnType==="revenue")?t.paymentMethod&&["cash","pos","fonepay","cash_fonepay"].includes(t.paymentMethod):t.txnType==="vendor_payment"?t.paymentMethod&&["cash","cheque","bank_transfer","digital_wallet","pos","fonepay","cash_fonepay"].includes(t.paymentMethod):!0,{message:"Invalid payment method for this transaction type",path:["paymentMethod"]});w(Zs).omit({id:!0,createdAt:!0,updatedAt:!0,approvedAt:!0,declinedAt:!0});w(ao).omit({id:!0,createdAt:!0});w(ta).omit({id:!0,createdAt:!0,usedCount:!0}).extend({validFrom:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t)),validUntil:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t))});w(Xs).omit({id:!0});w(Hs).omit({id:!0,createdAt:!0});w(no).omit({id:!0,createdAt:!0});w(Js).omit({id:!0});w(go).omit({id:!0,createdAt:!0,updatedAt:!0,approvalDate:!0}).extend({startDate:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t)),endDate:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t))});w(ho).omit({id:!0,createdAt:!0,updatedAt:!0});w(_o).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({totalDays:o.union([o.string(),o.number()]).transform(t=>String(t)),usedDays:o.union([o.string(),o.number()]).transform(t=>String(t)).optional(),remainingDays:o.union([o.string(),o.number()]).transform(t=>String(t))});w(yo).omit({id:!0,createdAt:!0});w(so).omit({id:!0,createdAt:!0}).extend({photoUrl:o.string().min(1,"Photo is required for wastage reporting")});w(ra).omit({id:!0,hotelId:!0,recordedBy:!0,checkIn:!0});w(wo).omit({id:!0,createdAt:!0});w(oe).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({pricePerPerson:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=99999999},{message:"Price per person must be a non-negative number (max 99,999,999)"})});w(bo).omit({id:!0,createdAt:!0}).extend({voucherDate:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t))});w(ue).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({checkInDate:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t)),checkOutDate:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t))});w(No).omit({id:!0,createdAt:!0}).extend({quantity:o.union([o.string(),o.number()]).transform(t=>String(t)),unitPrice:o.union([o.string(),o.number()]).transform(t=>String(t)),totalCharge:o.union([o.string(),o.number()]).transform(t=>String(t))});w(Ws).omit({id:!0,createdAt:!0});const Bo=w(Y).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0,currentReservationId:!0});w(To).omit({id:!0,createdAt:!0,updatedAt:!0,approvedAt:!0,deliveredAt:!0}).extend({quantity:o.union([o.string(),o.number()]).transform(t=>String(t))});const qo=w(ia).omit({id:!0,createdAt:!0,updatedAt:!0,confirmedAt:!0,cancelledAt:!0}).extend({bookingStartTime:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t)),bookingEndTime:o.string().or(o.date()).transform(t=>t instanceof Date?t:new Date(t)),numberOfPeople:o.union([o.string(),o.number()]).transform(t=>Number(t)).refine(t=>t>=1&&t<=1e5,{message:"Number of people must be between 1 and 100,000"}),hallBasePrice:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=99999999},{message:"Hall base price must be a non-negative number (max 99,999,999)"}),totalAmount:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=99999999},{message:"Total amount must be a non-negative number (max 99,999,999)"}),advancePaid:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=99999999},{message:"Advance paid must be a non-negative number (max 99,999,999)"}),balanceDue:o.union([o.string(),o.number()]).transform(t=>String(t)).refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=-99999999&&e<=99999999},{message:"Balance due must be a valid number (between -99,999,999 and 99,999,999)"})});w(So).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({basePrice:o.union([o.string(),o.number()]).transform(t=>String(t))});w(vo).omit({id:!0,createdAt:!0}).extend({amount:o.union([o.string(),o.number()]).transform(t=>String(t))});o.object({status:o.enum(["pending","approved","declined","ready","served","completed","cancelled"]).optional(),qty:o.number().int().min(1).optional(),declineReason:o.string().optional(),inventoryVerified:o.boolean().optional()}).refine(t=>!t.status||t.status!=="declined"||t.declineReason&&t.declineReason.trim().length>=10,{message:"Decline reason requires minimum 10 characters when declining a KOT item",path:["declineReason"]}).refine(t=>!t.status||t.status!=="cancelled"||t.declineReason&&t.declineReason.trim().length>=10,{message:"Cancellation reason requires minimum 10 characters",path:["declineReason"]});w(fo).omit({id:!0,createdAt:!0,updatedAt:!0});w(na).omit({id:!0,createdAt:!0,amendedAt:!0,finalizedAt:!0}).extend({subtotal:o.union([o.string(),o.number()]).transform(t=>String(t)),totalTax:o.union([o.string(),o.number()]).transform(t=>String(t)),discount:o.union([o.string(),o.number()]).transform(t=>String(t)),tipValue:o.union([o.string(),o.number()]).transform(t=>String(t)),tipAmount:o.union([o.string(),o.number()]).transform(t=>String(t)),serviceCharge:o.union([o.string(),o.number()]).transform(t=>String(t)),grandTotal:o.union([o.string(),o.number()]).transform(t=>String(t))});w(Io).omit({id:!0,createdAt:!0,voidedAt:!0}).extend({amount:o.union([o.string(),o.number()]).transform(t=>String(t))});const Ao=g("checkout_override_logs",{id:s("id").primaryKey().default(f`gen_random_uuid()`),reservationId:s("reservation_id").references(()=>ue.id),balanceDue:p("balance_due",{precision:14,scale:2}),overriddenBy:s("overridden_by").references(()=>h.id),reason:n("reason"),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});w(Ao).omit({id:!0,createdAt:!0}).extend({balanceDue:o.union([o.string(),o.number()]).transform(t=>String(t))});const Po=g("price_change_logs",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),itemId:s("item_id"),itemType:n("item_type"),itemName:n("item_name"),previousPrice:p("previous_price",{precision:12,scale:2}),newPrice:p("new_price",{precision:12,scale:2}),changedBy:s("changed_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});w(Po).omit({id:!0,createdAt:!0}).extend({previousPrice:o.union([o.string(),o.number()]).transform(t=>String(t)),newPrice:o.union([o.string(),o.number()]).transform(t=>String(t))});const zo=g("tax_change_logs",{id:s("id").primaryKey().default(f`gen_random_uuid()`),hotelId:s("hotel_id").references(()=>_.id),taxType:n("tax_type").notNull(),previousPercent:p("previous_percent",{precision:5,scale:2}),newPercent:p("new_percent",{precision:5,scale:2}),previousActive:I("previous_active"),newActive:I("new_active"),changedBy:s("changed_by").references(()=>h.id),createdAt:u("created_at",{withTimezone:!0}).defaultNow()});w(zo).omit({id:!0,createdAt:!0}).extend({previousPercent:o.union([o.string(),o.number(),o.null()]).transform(t=>t===null?null:String(t)),newPercent:o.union([o.string(),o.number(),o.null()]).transform(t=>t===null?null:String(t))});w(Za).omit({id:!0,loginAt:!0});w(to).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({largeTransactionThreshold:o.union([o.string(),o.number()]).transform(t=>String(t))});w(eo).omit({id:!0,firstSeen:!0,lastSeen:!0,createdAt:!0,updatedAt:!0});export{qo as a,Bo as i};
