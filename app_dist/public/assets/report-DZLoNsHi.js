import{u as oe,r as xe,l as x,j as e,B as me,s as Y,I as X,H as P,C as m,m as f,n as g,y as N,a as h}from"./index-Dk6nXF67.js";import{D as he,d as ue,k as U,c as $,l as M,C as F,m as z}from"./dashboard-layout-BUO8e75G.js";import{B as d}from"./badge-P46XOlcm.js";import{T as v,a as y,b as o,c as l,d as w,e as c}from"./table-BAc8EiUx.js";import{T as je,a as pe,b as S,c as k}from"./tabs-B2htHbJV.js";import{S as T}from"./separator-BKgyfyf_.js";import{S as L}from"./stats-card-DnI6mJO0.js";import{d as fe,U as V,c as ge,C as J,e as Ne,A as W}from"./users-Dxbor6Q1.js";import"./circle-alert-BbQxKC8I.js";import"./index-CC2mel_A.js";function Ae(){const{toast:Z}=oe(),[i,G]=xe.useState({from:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),{data:u=[]}=x({queryKey:["/api/hotels/current/rooms"],refetchInterval:3e3}),{data:D=[]}=x({queryKey:["/api/hotels/current/users"],refetchInterval:3e3}),{data:ee=[]}=x({queryKey:["/api/hotels/current/inventory-items"],refetchInterval:3e3}),{data:Q=[]}=x({queryKey:["/api/hotels/current/maintenance-requests"],refetchInterval:3e3});x({queryKey:["/api/hotels/current/vendors"],refetchInterval:3e3});const{data:se=[]}=x({queryKey:["/api/hotels/current/vouchers"],refetchInterval:3e3}),{data:te=[]}=x({queryKey:["/api/hotels/current/stock-requests"],refetchInterval:3e3}),{data:ae=[]}=x({queryKey:["/api/hotels/current/kot-orders"],refetchInterval:3e3}),{data:ne=[]}=x({queryKey:["/api/hotels/current/inventory-consumptions"],refetchInterval:3e3}),{data:le=[]}=x({queryKey:["/api/hotels/current/reservations"],refetchInterval:3e3}),{data:ce=[]}=x({queryKey:["/api/hotels/current/hall-bookings"],refetchInterval:3e3});x({queryKey:["/api/hotels/current/menu-items"],refetchInterval:3e3});const{data:re=[]}=x({queryKey:["/api/hotels/current/guests"],refetchInterval:3e3}),C=se.filter(s=>{if(!s.createdAt)return!1;const n=new Date(s.createdAt),a=new Date(i.from),t=new Date(i.to);return t.setHours(23,59,59,999),n>=a&&n<=t}),I=te.filter(s=>{if(!s.requestedAt)return!1;const n=new Date(s.requestedAt),a=new Date(i.from),t=new Date(i.to);return t.setHours(23,59,59,999),n>=a&&n<=t}),B=ae.filter(s=>{if(!s.createdAt)return!1;const n=new Date(s.createdAt),a=new Date(i.from),t=new Date(i.to);return t.setHours(23,59,59,999),n>=a&&n<=t}),R=le.filter(s=>{if(!s.checkIn)return!1;const n=new Date(s.checkIn),a=new Date(i.from),t=new Date(i.to);return t.setHours(23,59,59,999),n>=a&&n<=t}),A=ce.filter(s=>{if(!s.bookingDate)return!1;const n=new Date(s.bookingDate),a=new Date(i.from),t=new Date(i.to);return t.setHours(23,59,59,999),n>=a&&n<=t}),E=ne.filter(s=>{if(!s.createdAt)return!1;const n=new Date(s.createdAt),a=new Date(i.from),t=new Date(i.to);return t.setHours(23,59,59,999),n>=a&&n<=t}),H=u.length>0?u.filter(s=>s.isOccupied).length/u.length*100:0,K=D.filter(s=>s.isActive).length,p=s=>D.find(n=>n.id===s),q=s=>re.find(n=>n.id===s),O=s=>ee.find(n=>n.id===s),ie=(s,n)=>{const a=new Blob([s],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),r=URL.createObjectURL(a);t.setAttribute("href",r),t.setAttribute("download",n),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},de=()=>{const s=new Date(i.from).toLocaleDateString(),n=new Date(i.to).toLocaleDateString();let a=`COMPREHENSIVE HOTEL OPERATIONAL TRANSPARENCY REPORT (${s} - ${n})

`;a+=`=== OCCUPANCY SUMMARY ===
`,a+=`Total Rooms,${u.length}
`,a+=`Occupied,${u.filter(t=>t.isOccupied).length}
`,a+=`Available,${u.filter(t=>!t.isOccupied).length}
`,a+=`Occupancy Rate,${H.toFixed(1)}%

`,a+=`=== STAFF SUMMARY ===
`,a+=`Total Staff,${D.length}
`,a+=`Active Staff,${K}

`,a+=`=== DISCOUNT VOUCHERS ===
`,a+=`Code,Type,Amount,Used/Max,Created By,Created At,Valid Until
`,C.forEach(t=>{const r=p(t.createdBy);a+=`${t.code},${t.discountType||"fixed"},${t.discountAmount||0},${t.usedCount||0}/${t.maxUses||"unlimited"},${(r==null?void 0:r.username)||"Unknown"},${new Date(t.createdAt).toLocaleString()},${t.validUntil?new Date(t.validUntil).toLocaleDateString():"No expiry"}
`}),a+=`
`,a+=`=== STOCK REQUESTS ===
`,a+=`Item,Quantity,Department,Requested By,Status,Requested At,Delivered At
`,I.forEach(t=>{var b;const r=p(t.requestedBy),j=O(t.itemId);a+=`${(j==null?void 0:j.name)||"Unknown"},${t.quantity} ${t.unit||""},${((b=r==null?void 0:r.role)==null?void 0:b.name)||"Unknown"},${(r==null?void 0:r.username)||"Unknown"},${t.status},${new Date(t.requestedAt).toLocaleString()},${t.deliveredAt?new Date(t.deliveredAt).toLocaleString():"Pending"}
`}),a+=`
`,a+=`=== FOOD & DRINK ORDERS (KOT) ===
`,a+=`Table,Items,Status,Created By,Created At
`,B.forEach(t=>{var b;const r=p(t.createdBy),j=((b=t.items)==null?void 0:b.map(_=>`${_.description} (${_.qty})`).join("; "))||"No items";a+=`Table ${t.tableId},${j},${t.status},${(r==null?void 0:r.username)||"Unknown"},${new Date(t.createdAt).toLocaleString()}
`}),a+=`
`,a+=`=== INVENTORY CONSUMPTION ===
`,a+=`Item,Quantity,Reason,Used By,Date
`,E.forEach(t=>{const r=O(t.itemId),j=p(t.createdBy);a+=`${(r==null?void 0:r.name)||"Unknown"},${t.qty} ${t.unit||""},${t.reason||"Usage"},${(j==null?void 0:j.username)||"System"},${new Date(t.createdAt).toLocaleString()}
`}),a+=`
`,a+=`=== ROOM RESERVATIONS ===
`,a+=`Guest,Room,Check-In,Check-Out,Status,Meal Plan
`,R.forEach(t=>{const r=q(t.guestId);a+=`${(r==null?void 0:r.fullName)||"Unknown"},${t.roomNumber||t.roomId},${new Date(t.checkIn).toLocaleDateString()},${new Date(t.checkOut).toLocaleDateString()},${t.status},${t.mealPlan||"None"}
`}),a+=`
`,a+=`=== HALL BOOKINGS ===
`,a+=`Customer,Hall,Event Date,Purpose,Guests,Status
`,A.forEach(t=>{a+=`${t.customerName||"Unknown"},${t.hallId},${new Date(t.bookingDate).toLocaleDateString()},${t.purpose||"Event"},${t.numberOfGuests||0},${t.status}
`}),ie(a,`hotel_operational_report_${i.from}_to_${i.to}.csv`),Z({title:"Operational Report Exported",description:"Complete hotel operational report downloaded"})};return e.jsx(he,{title:"Hotel Operational Transparency",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Complete Operational Transparency"}),e.jsx("p",{className:"text-muted-foreground",children:"Full visibility into all hotel operations - vouchers, stock, orders, bookings & more"})]}),e.jsxs(me,{onClick:de,"data-testid":"button-export-comprehensive",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Export Complete Report"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"date-from",children:"From Date"}),e.jsx(X,{id:"date-from",type:"date",value:i.from,onChange:s=>G(n=>({...n,from:s.target.value})),"data-testid":"input-date-from"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"date-to",children:"To Date"}),e.jsx(X,{id:"date-to",type:"date",value:i.to,onChange:s=>G(n=>({...n,to:s.target.value})),"data-testid":"input-date-to"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(L,{title:"Occupancy Rate",value:`${H.toFixed(1)}%`,icon:e.jsx(ue,{}),iconColor:"text-blue-500"}),e.jsx(L,{title:"Active Staff",value:K,icon:e.jsx(V,{}),iconColor:"text-purple-500"}),e.jsx(L,{title:"Period Vouchers",value:C.length,icon:e.jsx(U,{}),iconColor:"text-green-500"}),e.jsx(L,{title:"Stock Requests",value:I.length,icon:e.jsx($,{}),iconColor:"text-orange-500"})]}),e.jsxs(je,{defaultValue:"vouchers",className:"space-y-6",children:[e.jsxs(pe,{className:"grid w-full grid-cols-5 gap-2",children:[e.jsxs(S,{value:"vouchers","data-testid":"tab-vouchers",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Vouchers"]}),e.jsxs(S,{value:"inventory","data-testid":"tab-inventory",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Inventory"]}),e.jsxs(S,{value:"restaurant","data-testid":"tab-restaurant",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Restaurant & Bar"]}),e.jsxs(S,{value:"bookings","data-testid":"tab-bookings",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Rooms & Bookings"]}),e.jsxs(S,{value:"operations","data-testid":"tab-operations",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Staff & Maintenance"]})]}),e.jsx(k,{value:"vouchers",className:"space-y-6",children:e.jsxs(m,{children:[e.jsxs(f,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Discount Vouchers - Creation & Usage"]}),e.jsx(N,{children:"Complete voucher tracking - who created, who used, when and how many times"})]}),e.jsx(h,{children:C.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(U,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No vouchers in selected period"})]}):e.jsx("div",{className:"space-y-4",children:C.map(s=>{var a;const n=p(s.createdBy);return e.jsx(m,{className:"border-2",children:e.jsx(h,{className:"pt-6",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-xl font-bold",children:s.code}),e.jsx(d,{variant:s.usedCount>=(s.maxUses||1/0)?"destructive":"default",children:s.discountType==="percentage"?`${s.discountAmount}%`:`Rs. ${s.discountAmount}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created By:"}),e.jsx("span",{className:"ml-2 font-medium",children:(n==null?void 0:n.username)||"Unknown"}),e.jsxs("span",{className:"ml-1 text-xs text-muted-foreground",children:["(",((a=n==null?void 0:n.role)==null?void 0:a.name)||"Unknown",")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created At:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(s.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Usage:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.usedCount||0," / ",s.maxUses||"Unlimited"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Valid Until:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.validUntil?new Date(s.validUntil).toLocaleDateString():"No expiry"})]})]})]})})})},s.id)})})})]})}),e.jsxs(k,{value:"inventory",className:"space-y-6",children:[e.jsxs(m,{children:[e.jsxs(f,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Stock Requests & Issuance Tracking"]}),e.jsx(N,{children:"Complete storeroom activity - who took what stock, when, from which department"})]}),e.jsx(h,{children:I.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No stock requests in selected period"})]}):e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(o,{children:[e.jsx(l,{children:"Item"}),e.jsx(l,{children:"Quantity"}),e.jsx(l,{children:"Requested By"}),e.jsx(l,{children:"Department"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Requested At"}),e.jsx(l,{children:"Delivered At"})]})}),e.jsx(w,{children:I.map(s=>{var t,r;const n=p(s.requestedBy),a=O(s.itemId);return e.jsxs(o,{children:[e.jsx(c,{className:"font-medium",children:(a==null?void 0:a.name)||"Unknown Item"}),e.jsxs(c,{children:[s.quantity," ",s.unit||""]}),e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:(n==null?void 0:n.username)||"Unknown"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:((t=n==null?void 0:n.role)==null?void 0:t.name)||"Unknown"})]})}),e.jsx(c,{children:e.jsx(d,{variant:"outline",children:((r=n==null?void 0:n.role)==null?void 0:r.name)||"Unknown"})}),e.jsx(c,{children:e.jsxs(d,{variant:s.status==="delivered"?"default":s.status==="approved"?"secondary":"outline",children:[s.status==="delivered"&&e.jsx(F,{className:"h-3 w-3 mr-1"}),s.status==="pending"&&e.jsx(ge,{className:"h-3 w-3 mr-1"}),s.status]})}),e.jsx(c,{className:"text-sm",children:new Date(s.requestedAt).toLocaleString()}),e.jsx(c,{className:"text-sm",children:s.deliveredAt?new Date(s.deliveredAt).toLocaleString():"-"})]},s.id)})})]})})]}),e.jsx(T,{className:"my-6"}),e.jsxs(m,{children:[e.jsxs(f,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Inventory Consumption & Usage"]}),e.jsx(N,{children:"Stock usage tracking - what was used, how much, and by whom"})]}),e.jsx(h,{children:E.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No consumption records in selected period"})]}):e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(o,{children:[e.jsx(l,{children:"Item"}),e.jsx(l,{children:"Quantity"}),e.jsx(l,{children:"Reason/Purpose"}),e.jsx(l,{children:"Used By"}),e.jsx(l,{children:"Date"})]})}),e.jsx(w,{children:E.map(s=>{var t;const n=O(s.itemId),a=p(s.createdBy);return e.jsxs(o,{children:[e.jsx(c,{className:"font-medium",children:(n==null?void 0:n.name)||"Unknown"}),e.jsxs(c,{children:[s.qty," ",s.unit||""]}),e.jsx(c,{children:s.reason||"Usage"}),e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:(a==null?void 0:a.username)||"System"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:((t=a==null?void 0:a.role)==null?void 0:t.name)||""})]})}),e.jsx(c,{className:"text-sm",children:new Date(s.createdAt).toLocaleString()})]},s.id)})})]})})]})]}),e.jsx(k,{value:"restaurant",className:"space-y-6",children:e.jsxs(m,{children:[e.jsxs(f,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),"Food & Drink Orders (KOT)"]}),e.jsx(N,{children:"All restaurant and bar orders with items and quantities"})]}),e.jsx(h,{children:B.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(M,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No orders in selected period"})]}):e.jsx("div",{className:"space-y-4",children:B.map(s=>{const n=p(s.createdBy);return e.jsx(m,{className:"border-2",children:e.jsxs(h,{className:"pt-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"text-lg font-bold",children:["Table ",s.tableId]}),e.jsx(d,{variant:s.status==="closed"?"default":s.status==="open"?"secondary":"outline",children:s.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Created by ",(n==null?void 0:n.username)||"Unknown"," on ",new Date(s.createdAt).toLocaleString()]})]})}),s.items&&s.items.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Items Ordered:"}),e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(o,{children:[e.jsx(l,{children:"Item"}),e.jsx(l,{children:"Quantity"}),e.jsx(l,{children:"Unit"}),e.jsx(l,{children:"Status"})]})}),e.jsx(w,{children:s.items.map((a,t)=>e.jsxs(o,{children:[e.jsx(c,{className:"font-medium",children:a.description||a.menuItemId}),e.jsx(c,{children:a.qty}),e.jsx(c,{children:a.unit||"plate"}),e.jsx(c,{children:e.jsx(d,{variant:a.status==="ready"?"default":a.status==="approved"?"secondary":a.status==="declined"?"destructive":"outline",children:a.status})})]},t))})]})]})]})},s.id)})})})]})}),e.jsxs(k,{value:"bookings",className:"space-y-6",children:[e.jsxs(m,{children:[e.jsxs(f,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Rooms & Occupancy Status"]}),e.jsx(N,{children:"Real-time room status and occupancy information"})]}),e.jsxs(h,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Rooms"}),e.jsx("div",{className:"text-2xl font-bold",children:u.length})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-950 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Occupied"}),e.jsx("div",{className:"text-2xl font-bold",children:u.filter(s=>s.isOccupied).length})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Occupancy Rate"}),e.jsxs("div",{className:"text-2xl font-bold",children:[H.toFixed(1),"%"]})]})]}),e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(o,{children:[e.jsx(l,{children:"Room Number"}),e.jsx(l,{children:"Type"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Occupancy"}),e.jsx(l,{children:"Price"})]})}),e.jsx(w,{children:u.map(s=>{var n;return e.jsxs(o,{children:[e.jsx(c,{className:"font-bold",children:s.roomNumber}),e.jsx(c,{children:((n=s.type)==null?void 0:n.name)||"Standard"}),e.jsx(c,{children:e.jsx(d,{variant:s.status==="available"?"default":s.status==="maintenance"?"destructive":"secondary",children:s.status})}),e.jsx(c,{children:s.isOccupied?e.jsxs(d,{variant:"secondary",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"Occupied"]}):e.jsx(d,{variant:"outline",children:"Available"})}),e.jsxs(c,{className:"font-medium",children:["Rs. ",s.pricePerNight||0]})]},s.id)})})]})]})]}),e.jsx(T,{className:"my-6"}),e.jsxs(m,{children:[e.jsxs(f,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Room Reservations & Hall Bookings"]}),e.jsx(N,{children:"All reservations and bookings in the selected period"})]}),e.jsxs(h,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-4",children:["Room Reservations (",R.length,")"]}),R.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(J,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No room reservations in selected period"})]}):e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(o,{children:[e.jsx(l,{children:"Guest"}),e.jsx(l,{children:"Room"}),e.jsx(l,{children:"Check-In"}),e.jsx(l,{children:"Check-Out"}),e.jsx(l,{children:"Meal Plan"}),e.jsx(l,{children:"Status"})]})}),e.jsx(w,{children:R.map(s=>{const n=q(s.guestId);return e.jsxs(o,{children:[e.jsx(c,{className:"font-medium",children:(n==null?void 0:n.fullName)||"Unknown"}),e.jsx(c,{children:s.roomNumber||s.roomId}),e.jsx(c,{children:new Date(s.checkIn).toLocaleDateString()}),e.jsx(c,{children:new Date(s.checkOut).toLocaleDateString()}),e.jsx(c,{children:e.jsx(d,{variant:"outline",children:s.mealPlan||"EP"})}),e.jsx(c,{children:e.jsx(d,{variant:s.status==="confirmed"?"default":s.status==="cancelled"?"destructive":"secondary",children:s.status})})]},s.id)})})]})]}),e.jsx(T,{}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-4",children:["Hall Bookings (",A.length,")"]}),A.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(P,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No hall bookings in selected period"})]}):e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(o,{children:[e.jsx(l,{children:"Customer"}),e.jsx(l,{children:"Hall"}),e.jsx(l,{children:"Event Date"}),e.jsx(l,{children:"Purpose"}),e.jsx(l,{children:"Guests"}),e.jsx(l,{children:"Status"})]})}),e.jsx(w,{children:A.map(s=>e.jsxs(o,{children:[e.jsx(c,{className:"font-medium",children:s.customerName||"Unknown"}),e.jsx(c,{children:s.hallId}),e.jsx(c,{children:new Date(s.bookingDate).toLocaleDateString()}),e.jsx(c,{children:s.purpose||"Event"}),e.jsx(c,{children:s.numberOfGuests||0}),e.jsx(c,{children:e.jsx(d,{variant:s.status==="confirmed"?"default":s.status==="cancelled"?"destructive":"secondary",children:s.status})})]},s.id))})]})]})]})]})]}),e.jsxs(k,{value:"operations",className:"space-y-6",children:[e.jsxs(m,{children:[e.jsxs(f,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Staff Directory & Activity"]}),e.jsx(N,{children:"Complete staff information and current status"})]}),e.jsxs(h,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Staff"}),e.jsx("div",{className:"text-2xl font-bold",children:D.length})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-950 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active"}),e.jsx("div",{className:"text-2xl font-bold",children:K})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Online Now"}),e.jsx("div",{className:"text-2xl font-bold",children:D.filter(s=>s.isOnline).length})]})]}),e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(o,{children:[e.jsx(l,{children:"Username"}),e.jsx(l,{children:"Role"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Online"}),e.jsx(l,{children:"Last Login"})]})}),e.jsx(w,{children:D.map(s=>{var n;return e.jsxs(o,{children:[e.jsx(c,{className:"font-medium",children:s.username}),e.jsx(c,{children:e.jsx(d,{variant:"outline",children:((n=s.role)==null?void 0:n.name)||"Unknown"})}),e.jsx(c,{children:s.isActive?e.jsxs(d,{variant:"default",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"Active"]}):e.jsxs(d,{variant:"destructive",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Inactive"]})}),e.jsx(c,{children:s.isOnline?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm",children:"Online"})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-sm",children:"Offline"})]})}),e.jsx(c,{className:"text-sm",children:s.lastLogin?new Date(s.lastLogin).toLocaleString():"Never"})]},s.id)})})]})]})]}),e.jsx(T,{className:"my-6"}),e.jsxs(m,{children:[e.jsxs(f,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5"}),"Maintenance Requests & History"]}),e.jsx(N,{children:"All maintenance requests with photos and complete details"})]}),e.jsx(h,{children:Q.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(W,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No maintenance requests found"})]}):e.jsx("div",{className:"space-y-4",children:Q.map(s=>{var n,a;return e.jsx(m,{className:"border-2",children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold",children:s.title}),e.jsx(d,{variant:s.status==="completed"?"default":s.status==="in_progress"?"secondary":s.status==="pending"?"outline":"destructive",children:s.status}),e.jsxs(d,{variant:s.priority==="high"?"destructive":s.priority==="medium"?"secondary":"outline",children:[s.priority," priority"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.location})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Reported By:"}),e.jsx("span",{className:"ml-2 font-medium",children:((n=s.reportedBy)==null?void 0:n.username)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Assigned To:"}),e.jsx("span",{className:"ml-2 font-medium",children:((a=s.assignedTo)==null?void 0:a.username)||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(s.createdAt).toLocaleString()})]})]})]}),s.photo&&e.jsx("img",{src:s.photo,alt:"Maintenance issue",className:"w-32 h-32 object-cover rounded-lg ml-4"})]})})},s.id)})})})]})]})]})]})})}export{Ae as default};
